var __spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},IDBbOv,EIHB,IFrameOverlay;(function(n){function tt(i){t.src?n.hasMms()&&t.contentWindow.location.href!==o||t.contentWindow.location.replace(i):t.src=i}function it(){var n=_w.IDPTit;n&&(t.setAttribute("title",n),t.setAttribute("name",n))}function b(n){p=n?wt:null}function rt(n){c.parentElement.style.overflow=n?"":"hidden"}function v(n){t.style.display=n?"block":"none"}function k(n){n===void 0&&(n=!0);var f=at(t);f&&typeof PageEvents!="undefined"&&(PageEvents===null||PageEvents===void 0?void 0:PageEvents.logUnload("back",f));b(!1);gt();n&&ct();i="";w||(u||(u=rt),u(!0));v(!1);lt();window.focus();r=!1;sj_ue(_d,"keyup",ft);sj_ue(_w,"click",et);s&&sessionStorage.removeItem(l)}function ct(){tt(o);t.setAttribute("name",h);i&&t.classList.remove(i)}function lt(){sj_evt.fire("IFrame.Close")}function at(n){try{return n.contentWindow._G.IG}catch(t){return null}}function vt(n,t){var r={type:d,url:n,hiddenParams:t,count:0},i;g?(i=n+"&ajaxhist=0&ajaxserp=0",y.pushState(r,"",i)):_w.location.hash=st+n+t}function yt(){var i,r=(i=f===null||f===void 0?void 0:f.setupOverlayMessaging(n.hasMms()?{iframe:t,frameSource:"/images/search?q=blank&view=detailV2&rndr=mm_mms",resolveTid:function(n){var t;if((t=_w.mm_mms)!==null&&t!==void 0)return t.idx[n]},closeFrame:k,onCanvasProvider:function(t){n.canvasProvider=t}}:{iframe:t,onCanvasProvider:function(t){n.canvasProvider=t}}))!==null&&i!==void 0?i:{},u=r.canvasBroker,e=r.getOverlayIndex;u&&(n.canvasBroker=u);e&&(a=e)}function pt(){var i,r=!1,u=_ge(h),f;return u!=null?(t=u,r=!0):(t=sj_ce("iframe",h,_w.IFOvlCls||"insightsOverlay"),t.setAttribute("data-tag","multimedia.iframeOverlay"),v(!1)),it(),typeof pMMUtils!="undefined"&&pMMUtils.qsv&&(f=(i=pMMUtils.qsv("overlayshw",!0))!==null&&i!==void 0?i:0,f==1&&t.setAttribute("ofv-tag","1")),t.onload=function(){n.showFrame();var t=this;try{(t.src!==o||t.contentWindow&&t.contentWindow.location.href!==o)&&bt()}catch(i){return null}},t.src=o,r||(c.appendChild(t),yt()),t}function ft(n){t&&r&&!t.contains(n.target)&&(sj_sp(n),sj_pd(n),t.focus())}function wt(){v(!0)}function bt(){var n=_ge(h);n.contentWindow?n.contentWindow.focus():n.focus()}function kt(){e=sj_ce("div",ot)}function dt(){var n,i=((n=_ge("b_header"))===null||n===void 0?void 0:n.parentNode)===_d.body,t=i?c:_ge("b_content")||c;t.insertBefore(e,t.firstChild)}function gt(){var n=e.parentElement;n&&n.removeChild(e);i&&e.classList.remove(i)}function ni(){return s=typeof IDBbOv!="undefined"&&IDBbOv,nt=typeof EIHB!="undefined"&&EIHB,kt(),pt(),ti(),!0}function ti(){g&&ht.bind(_w,"popstate",ii,!1);s&&sj_be(_w,"message",ri,!0)}function ii(i){if(i.state&&i.state.url&&i.state.type===d){var f=sessionStorage.getItem(l),u=i.state.count;s&&r&&typeof u!="undefined"&&typeof MMMessenger!="undefined"?u<parseInt(f)?(sessionStorage.setItem(l,u.toString()),MMMessenger.Post(t.contentWindow,"mm.goPrevious","")):MMMessenger.Post(t.contentWindow,"mm.goNext",""):n.show(i.state.url,!1,i.state.hiddenParams)}else r&&(k(),sj_evt.fire("ajax.state.update",_w.location.href))}function et(n){if(n&&n.target&&r){var i=n.target;t.contains(i)||typeof MMMessenger!="undefined"&&MMMessenger.Post(t.contentWindow,"mm.prepareClose","")}}function ri(n){var t=typeof MMMessenger!="undefined"?MMMessenger.GetMessageData(n):null;t&&typeof t.data=="number"&&t.command==="mm.closeIFrame"&&(nt&&(t.data+=1),y.go(-t.data));t&&(t.command==="onFavDel"||t.command==="onFavAdd"||t.command==="updateReactions")&&sj_evt.fire.apply(sj_evt,__spreadArray([t.command],t.data,!1))}function ui(n){var r,u,f,i,t,e;return n?(r=sj_ce("a"),r.href=n,u=_w.location,f=r.hostname,f&&f!=u.hostname)?null:(i="",t=r.pathname,t&&t.indexOf("/")!=0&&(t="/"+t),(i||t!=u.pathname)&&(i+=t),e=r.search,(i||e!=u.search)&&(i+=e),i):null}function fi(n){if(!n)return null;var t=sj_ce("a");return t.href=n,t.hash}var d="OverlayShow",h="OverlayIFrame",ot="OverlayMask",o="about:blank",st="#!",y=window.history,g=y.pushState?!0:!1,e,t,s=!1,nt=!1,r=!1,i="",p=null,c=_d.body,ht=SmartEvent,l="mm.idpstate",w=!1,u=null,f=typeof MxCanvasMessaging!="undefined"?MxCanvasMessaging:undefined,a,ut;n.show=n.show||function(o,h,c,a,y){var k;a===void 0&&(a=!1);y===void 0&&(y="");var d=typeof o=="string"?o:o[0],g=typeof o=="string"?undefined:o[1],p=ui(d);w=_w.dOSBVC;(typeof p=="string"&&p.length>0||f&&!!g)&&(k=p||t.src,c&&!p.includes(c)?k=p+c:c="",y&&(i="b_"+y,t.classList.add(i),e.classList.add(i)),r||(r=!0,dt(),sj_evt.fire("IFrame.Show"),ut(g),a||tt(k+fi(d)),it(),w||(u||(u=rt),u(!1)),b(!0),sj_be(_d,"keyup",ft),sb_ie||(t.style.colorScheme="none",v(!0)),h&&!n.hasMms()&&(vt(p,c),s&&sessionStorage.setItem(l,"0")),sj_be(_w,"click",et)))};n.showFrame=n.showFrame||function(){p&&(p(),b(!1))};n.closeIFrame=n.closeIFrame||function(){k()};n.setWindowScrollbarVisibilityOverride=n.setWindowScrollbarVisibilityOverride||function(n){u=n};ut=function(t){f===null||f===void 0?void 0:f.onVrhmClick(t);var i=a===null||a===void 0?void 0:a(t);isNaN(i)||(n.canvasProvider?n.canvasProvider.setCurrentMediaIndex(i):_w.mm_mms.ci=i)};n.hasMms=function(){return!!_w.mm_mms};n._i=n._i||ni()})(IFrameOverlay||(IFrameOverlay={}))