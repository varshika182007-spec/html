var __assign,__spreadArray,__awaiter,__generator,CopilotSearchMessagerIframe,CopilotSearchMessager,CopilotSearch;__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},function(n){var t;(function(t){function b(n){switch(n){case r.TurnStart:g();return;case r.ConversationStart:nt();return;default:return}}function k(){a=!0}function d(){e++}function o(){return e==1&&!a?r.NavigationStart:r.TurnStart+"-"+e}function f(n){return n+"-"+e}function g(){c&&d();var n=o();n!=r.NavigationStart&&performance.mark(n);c=!0;l()}function nt(){performance.mark(r.ConversationStart);l()}function tt(n,t,e,s){var h=f(r.VisuallyReady);performance.mark(h,{startTime:s});u(i.TTVR,o(),h);u(i.TTVR_FirstTurnNoNav,r.ConversationStart,h);u(i.TTVR_RefreshDuration,f(r.LastTokenRender),h);st(n,t,e);w(n,t,e)}function it(n,t,e,s){var h=f(r.FirstTokenRender);performance.mark(h,{startTime:s-performance.timeOrigin});u(i.TTVR_FirstTokenRender,o(),h);w(n,t,e)}function rt(n){var t=f(r.FirstThinkingToken);performance.mark(t,{startTime:n-performance.timeOrigin});u(i.TTVR_FirstThinkingToken,o(),t)}function ut(n){if(s(f(r.FirstTokenRender))){var t=f(r.LastTokenRender);performance.mark(t,{startTime:n-performance.timeOrigin});u(i.TTVR_FirstToLast,f(r.FirstTokenRender),t);u(i.TTVR_LastTokenRender,o(),t)}}function ft(n){var t=f(r.StreamAjaxSend);s(t)||(performance.mark(t,{startTime:n-performance.timeOrigin}),u(i.TTVR_StreamAjaxSend,o(),t))}function et(t,f,o){var h,c=e-1,l,a,s,y;performance.mark(r.SuggestionChipsReady+"-"+c);l=r.VisuallyReady+"-"+c;a=r.SuggestionChipsReady+"-"+c;u(i.TTVR_SuggestionChips,l,a);s=v(i.TTVR_SuggestionChips);n.Helper.writeLog(n.Helper.ClientInst.Perf,i.TTVR_SuggestionChips,"OvrIG",t,"latency",s+"");n.Conversation.emitcopilotSearchSCLatency_TTVR(s);y=n.Helper.getResponseId();n.Helper.logCustomData("CI.SystemEvent",n.Helper.LogNames.PerformanceData,"CSearch",(h={ConversationId:f,TurnIndex:o+"",ResponseId:y},h[i.TTVR_SuggestionChips]=s+"",h),t)}function ot(){var t=[i.TTVR,i.TTVR_FirstTokenRender,i.TTVR_FirstTurnNoNav,i.TTVR_FirstThinkingToken,i.TTVR_FirstToLast,i.TTVR_LastTokenRender,i.TTVR_StreamAjaxSend,i.TTVR_RefreshDuration],n={};return t.forEach(function(t){n[t]=v(t)+""}),n}function st(t,i,r){var u=ot();n.Helper.logCustomData("CI.SystemEvent",n.Helper.LogNames.PerformanceData,"CSearch",__assign({ConversationId:i,TurnIndex:r+"",ResponseId:r+"-"+i},u),t);e++;c=!1}function u(n,t,i){s(t)&&s(i)&&performance.measure(n,t,i)}function v(n){var t=performance.getEntriesByName(n)[0];return t&&"duration"in t?Math.round(t.duration):-1}function s(n){if(n==r.NavigationStart)return!0;var t=performance.getEntriesByName(n,"mark");return t.length>0}function w(t,i,r){var f=n.Helper.getResponseId(),u;p!=f&&(p=f,l(),n.Helper.logCustomData("CI.SystemEvent",n.Helper.LogNames.DwellTimeFiveSec,"CSearch",{ConversationId:i,TurnIndex:r+"",ResponseId:r+"-"+i,Duration:"0"},t),u=1,h=setInterval(function(){var f=u*y;n.Helper.logCustomData("CI.SystemEvent",n.Helper.LogNames.DwellTimeFiveSec,"CSearch",{ConversationId:i,TurnIndex:r+"",ResponseId:r+"-"+i,Duration:f+""},t);u==ht&&clearInterval(h);u++},y*1e3))}function l(){h&&clearInterval(h)}var e=1,c=!1,a=!1,r,i;(function(n){n.ConversationStart="conversationStart";n.FirstTokenRender="FirstTokenRender";n.FirstThinkingToken="TTVR.FirstThinkingToken";n.LastTokenRender="LastTokenRender";n.NavigationStart="navigationStart";n.StreamAjaxSend="StreamAjaxSend";n.SuggestionChipsReady="SuggChipsReady";n.TurnStart="TurnStart";n.VisuallyReady="VisuallyReady"})(r=t.PerformanceMarkers||(t.PerformanceMarkers={})),function(n){n.TTVR="TTVR";n.TTVR_FirstThinkingToken="TTVR.FirstThinkingToken";n.TTVR_FirstTokenRender="TTVR.FirstToken";n.TTVR_FirstToLast="TTVR.FirstToLast";n.TTVR_FirstTurnNoNav="TTVR.FirstTurnNoNav";n.TTVR_LastTokenRender="TTVR.LastToken";n.TTVR_StreamAjaxSend="TTVR.StreamAjaxSend";n.TTVR_SuggestionChips="TTVR.SuggestionChips";n.TTVR_RefreshDuration="TTVR.RefreshDuration"}(i||(i={}));t.markEvent=b;t.setIsInlineChat=k;t.markTurnVisuallyReady=tt;t.markFirstTokenRender=it;t.markFirstThinkingToken=rt;t.markLastTokenRender=ut;t.markStreamAjaxSend=ft;t.markTurnSuggestionsChipReady=et;var y=5,ht=12,h=0,p=""})(t=n.PerformanceHelper||(n.PerformanceHelper={}))}(CopilotSearch||(CopilotSearch={}));__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},function(n){var t;(function(n){function y(t){n.locStrings=t.locStrings;n.maxSuggestCount=t.maxSug;n.originalUrl=window.location.href}function p(){var n=_d.getElementsByClassName("b_dark");return n!=null&&n.length!=0}function w(t,i){i===void 0&&(i=n.originalUrl);var f=new RegExp("[?&]{1}".concat(t,"=([^&]+)"),"i"),r=i.match(f),u=r?r[1]:null;return u?decodeURIComponent(u.replace(/\+/g," ")):""}function b(t,i){i===void 0&&(i=n.originalUrl);var u=decodeURIComponent(i).replace(/&amp;/gi,"&"),f=new RegExp("[?&]{1}".concat(t,"=([^&]+)"),"i"),r=u.match(f);return r?r[1].replace(/\+/g," "):""}function u(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];typeof Log!="undefined"&&Log.Log&&Log.Log.apply(Log,__spreadArray([n,"CopilotSearch",t,!0],r,!1))}function k(n){typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare([n])}function d(n,t,i,r,u){typeof Log!="undefined"&&Log.LogCustomData&&Log.LogCustomData(n,"CopilotSearch",t,i,r,u)}function g(n,t,i){for(var f=[],r=3;r<arguments.length;r++)f[r-3]=arguments[r];u.apply(void 0,__spreadArray([n,t,"OvrIG",i],f,!1))}function nt(n){var t,i;return n&&((i=(t=n.impressionID)!==null&&t!==void 0?t:n.shLoadingIg)!==null&&i!==void 0?i:n.ig)}function tt(n,t,i){var r=new URL(n.href.toLowerCase());r.searchParams.has(t.toLowerCase())||n.searchParams.set(t,i)}function f(){var n=_d.querySelector(".ca_turn:last-of-type");return n?n.getAttribute("turnid"):null}function e(){var n=_d.querySelector("#convId");return n?n.getAttribute("value"):null}function it(){var n=e(),t=f();return!n||!t?"":t+"-"+n}function rt(){function n(){var n=new Uint32Array(1);return window.crypto.getRandomValues(n),n[0]/4294967296}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=n()*16|0,r=t==="x"?i:i&3|8;return r.toString(16)})}function ft(n,t){var i,r=n.contentDocument||((i=n.contentWindow)===null||i===void 0?void 0:i.document);return r?r.querySelector(t):null}var r,o,s,h,c,l,a,v,t,i,ut;(function(n){n[n.Error=0]="Error";n[n.FloatingZeroPage=1]="FloatingZeroPage";n[n.FloatCompose=2]="FloatCompose";n[n.Retry=3]="Retry";n[n.BlankInput=4]="BlankInput"})(o=n.CopilotSearchState||(n.CopilotSearchState={})),function(n){n[n.Success=1]="Success";n[n.Failure=2]="Failure";n[n.InProgress=3]="InProgress";n[n.Default=16]="Default"}(s=n.ChipsGenerationStatus||(n.ChipsGenerationStatus={})),function(n){n[n.IsRAIQueryBlocklist=1]="IsRAIQueryBlocklist";n[n.InitiatedGeneration=2]="InitiatedGeneration";n[n.IsComplete=3]="IsComplete";n[n.PapyrusRequestCreation=4]="PapyrusRequestCreation";n[n.PapyrusResponseProcess=5]="PapyrusResponseProcess";n[n.IsRAISuggestionsBlocklist=6]="IsRAISuggestionsBlocklist";n[n.IsQueryBlocklist=7]="IsQueryBlocklist";n[n.NoEntryInOS=8]="NoEntryInOS";n[n.NoProperStatus=9]="NoProperStatus";n[n.CorruptStatus=10]="CorruptStatus";n[n.Default=16]="Default"}(h=n.GenerationStatusReason||(n.GenerationStatusReason={})),function(n){n.Click="Click";n.CopilotSystem="CopilotSystem";n.CopilotInteraction="CopilotInteraction";n.Perf="Perf";n.SystemEvent="SystemEvent";n.AjaxAds="AjaxAds"}(c=n.ClientInst||(n.ClientInst={})),function(n){n.AttachmentUploadSuccess="AttachmentUploadSuccess";n.AttachmentUploadFailure="AttachmentUploadFailure";n.BackToSerp="BackToSerp";n.ConversationStarted="ConversationStarted";n.ConversationCreateFailure="ConversationCreateFailure";n.DislikeClicked="DislikeClicked";n.DwellTimeFiveSec="DwellTimeFiveSec";n.LikeClicked="LikeClicked";n.MenuToggle="MenuToggle";n.NewThreadButtonClicked="NewThreadButtonClicked";n.NewThreadFromError="NewThreadFromError";n.ModelSwitchingMenuToggle="ModelSwitchingMenuToggle";n.ModelSwitchingOptionClicked="ModelSwitchingOptionClicked";n.OpenAllResults="OpenAllResults";n.PerformanceData="PerformanceData";n.QueryIssued="QueryIssued";n.ResponseRendered="ResponseRendered";n.ResponseFailed="ResponseFailed";n.ResponseTimeout="ResponseTimeout";n.ResultsEmpty="ResultsEmpty";n.ContainerNoAnswer="ContainerNoAnswer";n.ThinkStateError="ThinkStateError";n.RetryButtonClicked="RetryButtonClicked";n.BackButtonClicked="BackButtonClicked";n.SuggestionChipsApiSent="SuggestionChipsApiSent";n.TotalSuggestionChipsApiReq="TotalSuggestionChipsApiReq";n.FeedbackClick="FeedbackClick";n.SuggestionChipsApiSuccess="SuggestionChipsApiSuccess";n.SuggestionChipsApiEmptyResponse="SuggestionChipsApiEmptyResponse";n.SuggestionChipsApiError="SuggestionChipsApiError";n.SuggestionChipsApiFailure="SuggestionChipsApiFailure";n.SuggestionChipsApiReachMaxRetry="SuggestionChipsApiReachMaxRetry";n.SuggestionChipRender="SuggestionChipRender";n.SuggestionChipEvent="SuggestionChipEvent";n.SuggestionChipClick="SuggestionChipClick";n.SuggestionChipsRetryNum="SuggestionChipsRetryNum";n.ScopeClick="ScopeClick";n.NoChipMsg="NoChipMsg";n.Error="Error";n.CopilotAnswerLoadTime="CopilotAnswerLoadTime";n.CitationPopup="CitationPopup";n.CitationClick="CitationClick";n.CitationDimiss="CitationDimiss";n.ComposerSubmitButtonClicked="ComposerSubmitButtonClicked";n.ClipboardPasteTransfer="ClipboardPasteTransfer";n.ZeroInputCardClicked="ZeroInputCardClicked";n.DiscoverCardClicked="DiscoverCardClicked";n.NewSearchClicked="NewSearchClicked";n.CacheOnlyRequestIssued="CacheOnlyRequestIssued";n.TriggerFailureFallback="IssuedFrameFailureFallback";n.ZeroInputPageLoaded="ZeroInputPageLoaded";n.ZipAjaxRequestSent="ZipAjaxRequestSent";n.ZipAjaxRequestSuccess="ZipAjaxRequestSuccess";n.ZipAjaxRequestFailure="ZipAjaxRequestFailure";n.ZipHtmlResponseAppended="ZipHtmlResponseAppended";n.ZipHtmlResponseAppendFail="ZipHtmlResponseAppendFail";n.MagazineFollowupIssued="MagFollowIssued";n.TraceIdDebug="TraceIdDebug";n.TraceIdData="TraceIdData";n.OverlayCitationClick="OverlayCitationClick";n.OverlayLinkClick="OverlayLinkClick";n.OverlayCheckSourceClick="OverlayCheckSourceClick";n.OverlayPopup="OverlayPopup";n.OverlayDimiss="OverlayDimiss";n.StopStreamingClick="StopStreamingButtonClick";n.PostMessageToTurn="PostMessageToTurn";n.CopyButtonRendered="CopyButtonRendered";n.CopyButtonClick="CopyButtonClick";n.AttachmentAdded="AttachmentAdded";n.AttachmentUpdated="AttachmentUpdated";n.AttachmentCleared="AttachmentCleared";n.ScrollToBottomIssueQuery="ScrollToBottomIssueQuery";n.AjaxAdsLoadTime="AjaxAdsLoadTime";n.AjaxAdsLoadedAfterIframe="AjaxAdsLoadedAfterIframe";n.AjaxAdsErrorStateDroppedAds="AjaxAdsErrorStateDroppedAds";n.AjaxAdsDuplicatedCopyCallCaughtByMap="AjaxAdsDuplicatedCopyCallCaughtByMap";n.AjaxAdsDuplicatedCopyCallCaughtByElement="AjaxAdsDuplicatedCopyCallCaughtByElement"}(l=n.LogNames||(n.LogNames={})),function(n){n.AutoSuggest="AutoSuggest";n.History="History";n.MagFollow="MagFollow";n.ScrollToBottom="ScrollToBottom";n.SuggestionChip="SuggestionChip";n.Text="Text";n.Voice="Voice";n.Url="Url";n.Zero="Zero";n.ThreadHistory="ThreadHistory";n.Scope="Scope"}(a=n.InputTypes||(n.InputTypes={})),function(n){n.Turn="Turn";n.Zero="Zero";n.Rest="Rest";n.Float="Float";n.FloatZero="FloatZero"}(v=n.CopilotMode||(n.CopilotMode={}));n.svgNS="http://www.w3.org/2000/svg";n.hiddenClassName="hidden";n.loadingClassName="loading";n.collapseClassName="coll";n.maxSuggestCount=-1;n.isDarkMode=p();n.GlobalInstTracker=_w.GlobalInstTracker;n.instTracker=typeof n.GlobalInstTracker!="undefined"?(r=n.GlobalInstTracker.createInstTracker("CopilotSearch"))!==null&&r!==void 0?r:n.GlobalInstTracker.getInstTracker("CopilotSearch"):null;n.originalUrl=window.location.href;n.initConfig=y;n.getValueFromUrl=w;n.getValueFromUrlNormalized=b;n.writeLog=u;n.writeFilterFlareLog=k;n.logCustomData=d;n.writeOverrideLog=g;n.getImpressionId=nt;n.setParamIfNotExist=tt;n.getLastTurnId=f;n.getConversationId=e;n.getResponseId=it;n.generateIGUID=rt;t="__METRIC_NAME__";i="/shux/monitor?metric=".concat(t);n.suggestionchipSendMonitorEndpoint=i.replace(t,"copilotSearchSC");n.copilotSearchSCFetchRetryMonitorEndpoint=i.replace(t,"copilotSearchSCFetchRetry");n.copilotSearchSC_TTVR_MonitorEndpoint=i.replace(t,"copilotSearchSC_TTVR");n.copilotSearchSCFetchStatusMonitorEndpoint=i.replace(t,"copilotSearchSCFetchStatusFromApi"),function(n){n[n.TotalAjaxSend=0]="TotalAjaxSend";n[n.TotalAjaxValidResponse=1]="TotalAjaxValidResponse";n[n.TotalHitCache=2]="TotalHitCache";n[n.TotalPostReceived=3]="TotalPostReceived";n[n.TotalTimeout=4]="TotalTimeout";n[n.TotalSCRendered=5]="TotalSCRendered";n[n.TotalPostReceivedHasChips=6]="TotalPostReceivedHasChips";n[n.TotalPostReceivedOnlyKey=7]="TotalPostReceivedOnlyKey";n[n.TotalAjaxReachMaxRetry=8]="TotalAjaxReachMaxRetry";n[n.TotalAjaxSentImpression=9]="TotalAjaxSentImpression"}(ut=n.SuggestionchipMdmFetchType||(n.SuggestionchipMdmFetchType={}));n.suggestionChipsFetchApi="/wpt/fetchcopsearchsc";n.getIframeInternalElement=ft})(t=n.Helper||(n.Helper={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function s(t){var s,f,c,a;if(t.length>1){if(f=t[1],i){c=!0;o&&t.length>2&&t[2]===n.Helper.InputTypes.Scope&&(c=!1);n.Helper.getLastTurnId()==null&&(history.replaceState({inlineTurn:0},"",location.href),h(f,c));return}var e=new URL(location.href),v=encodeURI(f),l=new URL("".concat(e.origin,"/search?q=").concat(v,"&FORM=HDRSC1"));r&&history.replaceState({debug:"query entry"},"",l);a=e.searchParams.get("Q")?"Q":"q";e.searchParams.set(a,f);r&&history.pushState({debug:"current"},"",e);document.title=f;u||((s=_qs(".b_scopebar #b-scopeListItem-web a"))===null||s===void 0?void 0:s.setAttribute("href",l.href))}}function h(t,r){var u=new URL(location.href),h=u.searchParams.get("q")||u.searchParams.get("Q"),o,c,l,s,a;h&&t&&(e?(c=u.searchParams.get("Q")?"Q":"q",u.searchParams.set(c,t),r&&u.searchParams.set("pq",h),u.searchParams.set("mturn","1"),o=u):(l=encodeURI(t),s="".concat(u.origin,"/copilotsearch?q=").concat(l),r&&(a=encodeURI(h),s+="&pq=".concat(a)),s+="&FORM=ANWSB6",o=new URL(s)),i&&u.searchParams.forEach(function(t,i){var u,r;i.indexOf("csif")==0&&(u=encodeURIComponent(i.substring(4)),r=encodeURIComponent(t),n.Helper.setParamIfNotExist(o,u,r));i=="darkschemeovr"&&(r=encodeURIComponent(t),n.Helper.setParamIfNotExist(o,i,r))}),history.pushState({inlineTurn:1},"",o),f=!0)}function c(n){u=n.enableScopeLinkUpdate;r=n.enableCopilotSearchBrowserHistory;i=n.enableSERPChat;e=n.enableMultiTurnParam;o=n.disablePartialQueryForScopeTurns;history&&history.pushState&&history.replaceState&&(sj_evt.bind("cpltsrch_qry",s,!0),_w.addEventListener("popstate",function(n){if(i){var t=n.state;t&&(f&&t.inlineTurn==0||t.inlineTurn==1)&&(_d.location.href=_d.location.href)}else _d.location.href=_d.location.href},!1))}var u=!1,r=!1,i=!1,f=!1,e=!1,o=!1;t.init=c})(t=n.History||(n.History={}))}(CopilotSearch||(CopilotSearch={}));__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})};__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},function(n){var t;(function(t){function c(){var r="http://www.w3.org/2000/svg",n=_d.createElementNS(r,"svg"),t,i;return n.setAttribute("width","16"),n.setAttribute("height","16"),n.setAttribute("viewBox","0 0 16 16"),n.setAttribute("aria-hidden","true"),n.setAttribute("fill","currentColor"),t=_d.createElementNS(r,"path"),t.setAttribute("class","default_path"),t.setAttribute("d","M6 0C4.89543 0 4 0.895431 4 2V12C4 13.1046 4.89543 14 6 14H12C13.1046 14 14 13.1046 14 12V2C14 0.89543 13.1046 0 12 0H6ZM5 2C5 1.44772 5.44772 1 6 1H12C12.5523 1 13 1.44772 13 2V12C13 12.5523 12.5523 13 12 13H6C5.44772 13 5 12.5523 5 12V2ZM2 4.00001C2 3.25973 2.4022 2.61339 3 2.26758V12.5C3 13.8807 4.11929 15 5.5 15H11.7324C11.3866 15.5978 10.7403 16 10 16H5.5C3.567 16 2 14.433 2 12.5V4.00001Z"),n.appendChild(t),i=_d.createElementNS(r,"path"),i.setAttribute("class","copied_path"),i.setAttribute("d","M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM11.3584 5.64645C11.1849 5.47288 10.9154 5.4536 10.7206 5.58859L10.6513 5.64645L7 9.298L5.35355 7.65131L5.28431 7.59346C5.08944 7.45846 4.82001 7.47775 4.64645 7.65131C4.47288 7.82488 4.4536 8.09431 4.58859 8.28917L4.64645 8.35842L6.64645 10.3584L6.71569 10.4163C6.8862 10.5344 7.1138 10.5344 7.28431 10.4163L7.35355 10.3584L11.3584 6.35355L11.4163 6.28431C11.5513 6.08944 11.532 5.82001 11.3584 5.64645Z"),n.appendChild(i),n}function s(){var i="http://www.w3.org/2000/svg",n=_d.createElementNS(i,"svg"),t;return n.setAttribute("width","16"),n.setAttribute("height","18"),n.setAttribute("viewBox","0 0 16 18"),n.setAttribute("aria-hidden","true"),n.setAttribute("fill","currentColor"),t=_d.createElementNS(i,"path"),t.setAttribute("class","outline_path"),t.setAttribute("d","M8.05198 1.29429C8.39129 0.316993 9.68406 -0.133279 10.4829 0.703848C10.6455 0.874273 10.8081 1.05843 10.9176 1.22265C11.2379 1.70316 11.3725 2.33595 11.4218 2.95232C11.4721 3.58045 11.438 4.25457 11.3738 4.86484C11.3093 5.47746 11.2129 6.03959 11.1328 6.44777C11.1294 6.46547 11.1259 6.48288 11.1225 6.5H12.006C13.8777 6.5 15.2924 8.19514 14.9576 10.0367L14.2737 13.7984C13.8017 16.3943 11.2078 18.0291 8.66224 17.3348L3.06251 15.8076C2.14894 15.5585 1.45455 14.8145 1.26885 13.886L0.915812 12.1208C0.638089 10.7322 1.69991 9.56244 2.82905 9.11612C3.15163 8.98861 3.44337 8.82679 3.66974 8.62597C5.37583 7.11245 5.99442 5.90287 7.05406 3.77695C7.4084 3.06605 7.77205 2.10054 8.05198 1.29429ZM10.0165 6.87862L10.0169 6.87707L10.0187 6.86973L10.0262 6.83863C10.0328 6.81079 10.0426 6.76903 10.0549 6.71494C10.0793 6.60669 10.1135 6.4493 10.1515 6.25536C10.2277 5.86666 10.3188 5.33504 10.3793 4.76016C10.4401 4.18293 10.4685 3.5758 10.425 3.03206C10.3806 2.47655 10.2652 2.04684 10.0855 1.77735C10.0264 1.6887 9.91385 1.55604 9.75942 1.39421C9.56051 1.18576 9.13137 1.23428 8.99666 1.62228C8.71411 2.43609 8.33339 3.45194 7.94904 4.22305C6.88216 6.36349 6.19326 7.72408 4.33336 9.37403C3.99304 9.67594 3.58878 9.8911 3.19665 10.0461C2.31631 10.3941 1.75035 11.1945 1.89639 11.9247L2.24943 13.6899C2.36085 14.247 2.77748 14.6934 3.32562 14.8428L8.92536 16.3701C10.9052 16.91 12.9227 15.6385 13.2898 13.6195L13.9738 9.85777C14.197 8.63009 13.2538 7.5 12.006 7.5H10.5015C10.3476 7.5 10.2022 7.42906 10.1074 7.30771C10.0127 7.18638 9.97921 7.02796 10.0165 6.87862C10.0165 6.87858 10.0165 6.87866 10.0165 6.87862Z"),n.appendChild(t),n}function l(n){return __awaiter(this,void 0,void 0,function(){var i,t,r,u;return __generator(this,function(f){switch(f.label){case 0:return(f.trys.push([0,5,,6]),i=n.html,t=n.text,r=typeof ClipboardItem!="undefined"&&!!navigator.clipboard.write,!r)?[3,2]:[4,navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([i],{type:"text/html"}),"text/plain":new Blob([t],{type:"text/plain"})}),])];case 1:return f.sent(),[3,4];case 2:return[4,navigator.clipboard.writeText(t)];case 3:f.sent();f.label=4;case 4:return[2,!0];case 5:return u=f.sent(),console.error("Clipboard write failed",u),[2,!1];case 6:return[2]}})})}function a(t){return new Promise(function(r,u){if(i){u(new Error("Another copy request is still pending"));return}i=r;var f={type:"CS_COPY_REQUEST",data:{turnId:t}},e=n.Helper.getResponseId();CopilotSearchMessager.postMessageToTurn(t,e,f);setTimeout(function(){i&&(i=null,u(new Error("Timeout waiting for copy data from iframe")))},5e3)})}function v(t){var o=this,i=sj_ce("button",undefined,"ca_action_btn ca_copy"),r,u,e;return i.setAttribute("aria-label",f),i.appendChild(c()),n.Helper.GlobalInstTracker&&n.Helper.instTracker&&t&&(r=[],u=n.Helper.instTracker.itemFactory.createInstrumentedItem({Name:"CopilotAnswerCopy"}),r.push(u),i.dataset.cspi=n.Helper.GlobalInstTracker.composeHValue(u),i.dataset.ig=t,i.dataset.clicks="true",n.Helper.instTracker.dataSourceSerializer.serializeItemsToJson(r),n.Helper.instTracker.writeLayoutFromElement(i),n.Helper.instTracker.flushInstrumentation(t)),e=n.Helper.getLastTurnId(),sj_be(i,"click",function(i){return __awaiter(o,void 0,void 0,function(){var r,u,f;return __generator(this,function(o){switch(o.label){case 0:return r=i.currentTarget,n.Helper.logCustomData("CI.InteractionEvent",n.Helper.LogNames.CopyButtonClick,"CSearch",{},t),[4,a(e)];case 1:return u=o.sent(),[4,l(u)];case 2:return f=o.sent(),f&&(Lib.CssClass.add(r,"copied"),setTimeout(function(){Lib.CssClass.remove(r,"copied")},3e3)),[2]}})})}),i}function h(t){var h=sj_ce("div",undefined,"ca_feedback_btns"),f=sj_ce("button",undefined,"ca_action_btn ca_like"),i,c,l,a;return f.setAttribute("tabindex","0"),f.setAttribute("aria-label",e),f.setAttribute("aria-pressed","false"),f.appendChild(s()),i=sj_ce("button",undefined,"ca_action_btn ca_dislike"),i.setAttribute("tabindex","0"),i.setAttribute("aria-label",o),i.setAttribute("aria-pressed","false"),i.appendChild(s()),h.appendChild(f),h.appendChild(i),n.Helper.GlobalInstTracker&&n.Helper.instTracker&&t&&(c=[],l=n.Helper.instTracker.itemFactory.createInstrumentedItem({Name:"CopilotAnswerLike"}),c.push(l),f.dataset.cspi=n.Helper.GlobalInstTracker.composeHValue(l),f.dataset.ig=t,f.dataset.clicks="true",a=n.Helper.instTracker.itemFactory.createInstrumentedItem({Name:"CopilotAnswerDislike"}),c.push(a),i.dataset.cspi=n.Helper.GlobalInstTracker.composeHValue(a),i.dataset.ig=t,i.dataset.clicks="true",n.Helper.instTracker.dataSourceSerializer.serializeItemsToJson(c),n.Helper.instTracker.writeLayoutFromElement(h),n.Helper.instTracker.flushInstrumentation(t)),sj_be(f,"click",function(){n.Helper.logCustomData("CI.InteractionEvent",n.Helper.LogNames.FeedbackClick,"CSearch",{Type:"positive"},t);h.classList.add("like_voted");h.classList.remove("dislike_voted");f.setAttribute("aria-pressed","true");i.setAttribute("aria-pressed","false")}),sj_be(i,"click",function(){if(n.Helper.logCustomData("CI.InteractionEvent",n.Helper.LogNames.FeedbackClick,"CSearch",{Type:"negative"},t),u){var e=r?"csLaunchFeedback":"feedbackformrequested";sj_evt.fire(e)}typeof _w.Log!="undefined"&&typeof Log.LogFilterFlare!="undefined"&&Log.LogFilterFlare(["csdislikebtnclick"]);h.classList.add("dislike_voted");h.classList.remove("like_voted");f.setAttribute("aria-pressed","false");i.setAttribute("aria-pressed","true")}),h}function y(t,i){var r=sj_ce("div",undefined,"ca_action_menu"),u,f;return(i=="QnATuringGen"||i=="GenSERPOptDoc")&&(u=v(t),r.appendChild(u),n.Helper.logCustomData("CI.InteractionEvent",n.Helper.LogNames.CopyButtonRendered,"CSearch",{},t)),f=h(t),r.appendChild(f),r}function p(n){var t=sj_ce("div",undefined,"ca_feedback"),i=h(n);return t.appendChild(i),t}function w(t){r=t.mobileUI;u=t.enableThumbdownFeedback;f=t.locStrings.copyButtonText;e=t.locStrings.likeButtonText;o=t.locStrings.dislikeButtonText;sj_evt.bind("ShellStopStreaming",function(){var i=_qs(".ca_turn[turnid='"+n.Helper.getLastTurnId()+"']"),t=_qs(".ca_copy",i);t&&Lib.CssClass.add(t,n.Helper.hiddenClassName)});sj_evt.bind("ShellCopyData",function(n){n&&n.length>1&&i&&(i(n[1]),i=null)})}var r=!1,u=!1,f,e,o,i=null;t.generateActionMenuElement=y;t.geterateFeedbackElement=p;t.init=w})(t=n.TopMenu||(n.TopMenu={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(n){function t(n){sj_evt.bind("feedbackInitialized",function(){i(n)},1)}function i(n){var t;typeof Feedback!="undefined"&&typeof Feedback.Hooks!="undefined"&&((t=Feedback.Hooks.submit)===null||t===void 0?void 0:t.use("copilotSearch",function(t){if(t){var i=t.structured_data=t.structured_data||{};n.convId&&(i.cpltsrchConversationId=n.convId)}return t}))}function r(n){var i,t;typeof Feedback!="undefined"&&typeof Feedback.Hooks!="undefined"&&n.iframeid&&(t=n.iframeid,(i=Feedback.Hooks.submit)===null||i===void 0?void 0:i.use("SHDebug_"+t,function(i){if(i){i.structured_data=i.structured_data||{};var r=i.structured_data.shDebugData=i.structured_data.shDebugData||{};r[t]=r[t]||{};n.shConversationId&&(r[t].shConversationId=n.shConversationId);n.shQueryId&&(r[t].shQuery=n.shQueryId);n.shLoadingIg&&(r[t].shLoadingIG=n.shLoadingIg);n.shLoadingEventId&&(r[t].shLoadingEventId=n.shLoadingEventId);n.shResultsIg&&(r[t].shResultsIG=n.shResultsIg);n.shResultsEventId&&(r[t].shResultsEventId=n.shResultsEventId);n.shTlwEventId&&(r[t].shTLWEventId=n.shTlwEventId);n.csConversationId&&(r[t].cpltsrchConverationId=n.csConversationId);n.answerSourceOptDoc&&(r[t].answerSourceOptDoc=n.answerSourceOptDoc);n.answerSources&&(r[t].answerSources=n.answerSources);n.ansType&&(r[t].ansType=n.ansType)}return i}))}n.init=t;n.enrichTurnSHFeedbackData=r})(t=n.FeedbackData||(n.FeedbackData={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(n){function t(n,t){t&&(t===null||t===void 0?void 0:t.iframeId)?(n.shTlwEventId&&(t.shTlwEventId=n.shTlwEventId),n.iframeid!=t.iframeId&&(n.shLoadingEventId&&(t.shLoadingEventId2=n.shLoadingEventId),n.shLoadingIg&&(t.shLoadingIg2=n.shLoadingIg),t.iframeId=n.iframeid)):(n.shLoadingEventId&&(t.shLoadingEventId1=n.shLoadingEventId),n.shLoadingIg&&(t.shLoadingIg1=n.shLoadingIg),t.iframeId=n.iframeid)}n.populateCsTurnDataObject=t})(t=n.TurnDataHelper||(n.TurnDataHelper={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function l(n){r=n.enableNonSpriteQueryIcon;i=n.mobileUI;u=n.enableShowAllButton;f=n.tabletAndDesktopUI;e=n.locStrings.querySentByYouText;o=n.enableCopilotCnBranding}function a(n,t){function i(r){var u,f;if(r[1]==t.id){if(n.parentElement)if(u=n.parentElement.querySelectorAll("[replacing]"),u.length>1)for(f=0;f<u.length;f++)u[f].parentElement&&u[f].parentElement.removeChild(u[f]);else n.parentElement.removeChild(n);Lib.CssClass.remove(t,"b_hidden");console.debug("Frame replacement complete");sj_evt.unbind("frameReadyToReplace",i)}}Lib.CssClass.add(t,"b_hidden");n.parentElement.appendChild(t);sj_evt.bind("frameReadyToReplace",i,!0)}function v(n,t,i,r,u,f,e){f===void 0&&(f=null);e===void 0&&(e="");s(n,t,i,function(){},r,u,f,e,!0)}function s(t,i,r,u,f,e,o,s,c){if(o===void 0&&(o=null),s===void 0&&(s=""),c===void 0&&(c=!1),s){var l=_d.querySelector("#".concat(s)),v=l&&l.parentElement&&l.parentElement.querySelector(".".concat(n.Helper.magFollowupClass));if(v)o=v;else{l.parentElement.appendChild(r);return}}o?c?o.parentElement&&o.parentElement.replaceChild(r,o):a(o,r):h(f,e,t,i,r,u)}function h(t,i,r,u,f,e){var v,s,h,b,y,c,p,l,a,w;return f===void 0&&(f=null),e===void 0&&(e=null),s=sj_ce("li",undefined,"ca_turn"),s.setAttribute("turnid",t.toString()),h=s,s.setAttribute("responseId","".concat(t,"-").concat(i)),r.childElementCount>0&&(b=sj_ce("div",undefined,"ca_div"),h.appendChild(b)),o&&(y=_qs(".b_copilot_model_switching .model_switching_menu"),c="",y&&y.querySelectorAll(".model_switching_option").forEach(function(n){var t;n.getAttribute("aria-selected")==="true"&&(c=(t=n.querySelector("span:nth-child(2)"))===null||t===void 0?void 0:t.textContent)}),p=_qs("#b_copilot_search .b_cs_disclaimer"),p&&(l=p.cloneNode(!0),l.classList.remove("hidden"),c&&(a=l.querySelector("span:nth-child(1)"),a&&(a.innerHTML=a.textContent.replace(" AI",' <span class="model-name">'.concat(c,"<\/span> AI")))),s.appendChild(l))),w=(v=n.AttachmentConversationView)===null||v===void 0?void 0:v.genAttachmentQueryEle(),w&&h.appendChild(w),u&&h.appendChild(u),f&&h.appendChild(f),r.appendChild(s),e&&e(s),h}function y(n){return _qs(".ca_userquery",n)}function p(n){var t=sj_ce("div",undefined,"ca_userquery"),s=sj_ce("div",undefined,"ca_userquery_icon"),o,h;return r&&s.appendChild(nt()),o=sj_ce("div",undefined,"ca_userquery_text"),o.setAttribute("aria-label",e+" "+n),o.innerText=n,f||t.appendChild(s),t.appendChild(o),!i&&u&&(h=c(n),t.appendChild(h)),t}function w(n){var t=_qs(".ca_userquery_text",n),i;t&&t.innerText&&(i=c(t.innerText),t.insertAdjacentElement("afterend",i))}function b(t,r){var e,u=t!==null&&t!==void 0?t:_qs(".ca_turn[turnid='"+n.Helper.getLastTurnId()+"']"),h=_qs(".ca_feedback",u);if(!h){var c=_qs(".ca_userquery",u),f=Lib.CssClass.contains(u,"frame_cont")?u:_qs(".frame_cont",u),o=r||((e=f===null||f===void 0?void 0:f.querySelector("iframe"))===null||e===void 0?void 0:e.getAttribute("ig")),s=n.TopMenu.geterateFeedbackElement(o!==null&&o!==void 0?o:"",i);i?f&&f.appendChild(s):c.appendChild(s)}}function k(t,i,r){var u=t!==null&&t!==void 0?t:_qs(".ca_turn[turnid='"+n.Helper.getLastTurnId()+"']"),s=_qs(".ca_action_menu",u);if(!s){var f=Lib.CssClass.contains(u,"frame_cont")?u:_qs(".frame_cont",u),e=i||(f===null||f===void 0?void 0:f.getAttribute("ig")),h=n.TopMenu.generateActionMenuElement(e!==null&&e!==void 0?e:"",r),o=_qs(".ca_userquery",u);o&&o.appendChild(h)}}function d(t,i){var r=t.querySelector("a.ca_back_serp"),u,f;r&&Lib.CssClass.remove(r,n.Helper.hiddenClassName);n.Helper.GlobalInstTracker&&n.Helper.instTracker&&r&&r.href&&(u=[],f=n.Helper.instTracker.itemFactory.createLink(r.href),u.push(f),r.dataset.cspi=n.Helper.GlobalInstTracker.composeHValue(f),n.Helper.instTracker.dataSourceSerializer.serializeItemsToJson(u),n.Helper.instTracker.writeLayoutFromElement(t),n.Helper.instTracker.flushInstrumentation(i))}function g(){n.Helper.writeLog(n.Helper.ClientInst.Click,n.Helper.LogNames.BackToSerp)}function c(t){var i=sj_ce("a",undefined,"ca_back_serp");return i.innerText=n.Helper.locStrings.showAllResults,i.href="https://www.bing.com/search?q="+encodeURIComponent(t),i.target="_blank",sj_be(i,"click",g),Lib.CssClass.add(i,n.Helper.hiddenClassName),i}function nt(){var i="http://www.w3.org/2000/svg",n=_d.createElementNS(i,"svg"),t;return n.setAttribute("width","24"),n.setAttribute("height","24"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("fill","currentColor"),t=_d.createElementNS(i,"path"),t.setAttribute("d","M4.5 10C4.5 6.96243 6.96243 4.5 10 4.5C13.0376 4.5 15.5 6.96243 15.5 10C15.5 13.0376 13.0376 15.5 10 15.5C6.96243 15.5 4.5 13.0376 4.5 10ZM10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17C11.6628 17 13.1902 16.4202 14.3911 15.4518L19.7197 20.7803C20.0126 21.0732 20.4874 21.0732 20.7803 20.7803C21.0732 20.4874 21.0732 20.0126 20.7803 19.7197L15.4518 14.3911C16.4202 13.1902 17 11.6628 17 10C17 6.13401 13.866 3 10 3Z"),n.appendChild(t),n}var r=!1,i=!1,u=!1,f=!1,e,o=!1;t.init=l;t.compWrap=v;t.wrap=s;t.genTurnContainer=h;t.queryEle=y;t.genQueryEle=p;t.showAll=w;t.addFeedbackToTurn=b;t.addActionMenu=k;t.inst=d})(t=n.TWrap||(n.TWrap={}))}(CopilotSearch||(CopilotSearch={}));__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})};__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},function(n){var t;(function(t){function re(){return su}function ue(i){var f,e,o,s,h,c,l,y,b,k,r,d;(dt=i.iframeLoadTimeoutMs,di=i.removeFailureIframe,v=_qs(".ca_container"),v)&&(Lib.CssClass.remove(v,n.Helper.hiddenClassName),au(!1),u=i.mobileUI,p=i.tabletAndDesktopUI,t.conversationId=i.convId,w=i.convSig,nr=i.suggestionChipsTimeoutMs,ct=i.enableCopilotSearchC8UXFeature,gt=i.answerPosition,tr=i.enableXapDebug,ir=i.disableAutoHorizontalScrollAnswer,gf=i.enableComposerForContinuation,ni=i.locStrings,tt=i.enableAjaxRequestFlow,rr=i.enableAppendClientipToFrame,ur=i.enableForceAppendClientipToFrame,fr=i.enableDirectlyRenderChips,or=i.enableForceNoCache,sr=i.enableForceRandomShmgid,hr=i.enableRequeryClickAsNewTurn,cr=i.enableCwMsg,ti=i.enableSandboxAttribute,it=i.disableSuggestionChipsErrorTips,lr=i.enableScrollBehaviorOptimization,ar=i.enableFallbackToMagazine,er=i.enableSCGenStatus,ii=i.enableNewTurnScrollToTop,vr=i.enableMgzOnlyFollowup,ri=i.enableMgzOnlyFollowupSH,yr=i.enableCachedGenserpForZeroInput,pr=i.enableZeroPageHistory,wr=i.applyScrollToFunc,ui=i.enableFeedbackFix,fi=i.enableTurnIndexFix,br=i.enableModelSwitching,rt=i.enableErrorMessageShow,at=i.enableStopStreamButton,kr=i.enableAppendPartialQuery,dr=i.disablePartialQueryForScopeTurns,gr=i.enableDebugMode,ne=i.enableMockedThreadData,ei=i.enableCopyButtonShow,ut=i.enableFeedbackShowAfterStreaming,nu=i.disableFirstTurnScroll,uu=i.requestUrl,tu=i.enableASOnTurn1,iu=i.enableFallbackSearchTimeout,ru=i.enableNewConvoThreadSaving,fu=i.enableThreadsRefreshReload,yt=i.enableQuoteToFollow,te=i.enableSideAlignedComposer,pt=(f=i.fromSerpComposer)!==null&&f!==void 0?f:!1,a=(e=i.enableSERPChat)!==null&&e!==void 0?e:!1,eu=(o=i.disableAjaxSerpOnMultiTurn)!==null&&o!==void 0?o:!1,ou=(s=i.enableTurnEvent)!==null&&s!==void 0?s:!1,hi=(h=i.ajaxAdsRequestEnabled)!==null&&h!==void 0?h:!1,hu=(c=i.adCallOnMultiTurnEnabled)!==null&&c!==void 0?c:!1,ci=(l=i.turnScrollOffset)!==null&&l!==void 0?l:-1,cu=(y=i.enableScrollToLastSerpAnswer)!==null&&y!==void 0?y:!1,li=(b=i.enableScrollToLastSerpAnswerLog)!==null&&b!==void 0?b:!1,lu=(k=i.enableDarkModeParam)!==null&&k!==void 0?k:!1,si=!0,r=n.ThreadsShared&&n.ThreadsShared.getConvUrl(),i.enableThreadsRefreshReload&&n.Threads&&r!=null?(vt=!0,n.Threads.fetchThread({ConversationId:r.convId,ConversationSignature:r.convSig,Title:"",LastUpdateTimestamp:0})):pt||(d=n.Helper.getValueFromUrl("q",uu||undefined),d.trim()?bt(d,n.Helper.InputTypes.Url):n.changeMode(n.Helper.CopilotMode.Zero)),typeof CopilotSearchMessager!="undefined"&&CopilotSearchMessager.bindMessageEvent?CopilotSearchMessager.bindMessageEvent(pi):(sj_be(_w,"message",le),tt&&sj_evt.bind("CSMessage",ae)),tu&&(sj_evt.bind("AS.Canvas.Show",n.AutoSuggest.hideSuggestionChips),sj_evt.bind("autosuggestHide",n.AutoSuggest.showSuggestionChips)),i.ajaxAdsRequestEnabled===!0&&sj_evt.bind("AdsCopy",fe),pt||(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",t.conversationId),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.ConversationStart)))}function fe(t){var r,e;if(!(t.length<3)){var u=_qs("#".concat(t[1]," iframe")),i=_qs("#ca_ads_magazine_".concat(t[2])),f="".concat(t[1],":").concat(t[2]),s=o.get(f);if(i&&i.getAttribute("data-loaded")!==null){if(u&&u.contentWindow&&i&&(r=u.contentWindow.document.getElementById("b_wpt_adst"),r)){if(s==="adcallready"||s==="adcallcompleted"){console.debug("AdCopyStatusMap indicates Ad is already copied");n.Helper.writeLog(n.Helper.ClientInst.AjaxAds,n.Helper.LogNames.AjaxAdsDuplicatedCopyCallCaughtByMap,"turnid",t[2],"iframeid",t[1]);return}if(r.hasChildNodes()){console.debug("AdMagazineStub indicates Ad is already copied");n.Helper.writeLog(n.Helper.ClientInst.AjaxAds,n.Helper.LogNames.AjaxAdsDuplicatedCopyCallCaughtByElement,"turnid",t[2],"iframeid",t[1]);return}e=i.cloneNode(!0);r.append(e);e.classList.remove("b_hide");o.set(f,"adcallready")}}else o.set(f,"adcallnotready")}}function h(n){n=="start"?(s!=0&&(sb_ct(s),s=0),s=sb_st(function(){sj_evt.fire(ai,"fail");s=0},dt+100)):s!=0&&(sb_ct(s),s=0);sj_evt.fire(ai,n)}function ee(){return __awaiter(this,void 0,void 0,function(){var t,i,n,r;return __generator(this,function(u){switch(u.label){case 0:t="https://".concat(k,"/copilotsearch");u.label=1;case 1:return u.trys.push([1,3,,4]),i={method:"GET",headers:{"X-MS-NewConv":"1"}},[4,fetch(t,i)];case 2:return(n=u.sent(),n.ok)?[2,n.text()]:[3,4];case 3:return r=u.sent(),[3,4];case 4:return[2,undefined]}})})}function oe(n){try{var i=new DOMParser,t=i.parseFromString(n,"text/html"),r=t.querySelector("data#convId"),u=t.querySelector("data#convSig"),f=t.querySelector("data#impressionGuid");return[r,u,f]}catch(e){return[null,null,null]}}function se(){var t;f=1;i=0;v.innerHTML="";n.ErrorState.hideErrorState();e=!1;l={};(p||u)&&(vi(),ft(),u||((t=n.SuggestionChips)===null||t===void 0?void 0:t.resetChips()));hi&&(o=new Map)}function au(i){return __awaiter(this,void 0,void 0,function(){var u,f,r,e,o,s,h,c;return __generator(this,function(l){switch(l.label){case 0:return(lt="",y="",!i)?[3,2]:(n.ThreadsShared&&n.ThreadsShared.resetConvUrl(),vt=!1,u=!1,[4,ee()]);case 1:f=l.sent();f&&(r=oe(f),e=r[0],o=r[1],s=r[2],e&&o&&s&&(_G.IG=s.value,t.conversationId=e.value,w=o.value,n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",t.conversationId),h=document.querySelector("data#convId"),c=document.querySelector("data#convSig"),h&&h.setAttribute("value",t.conversationId),c&&c.setAttribute("value",w),u=!0));u||n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationCreateFailure);l.label=2;case 2:return se(),[2]}})})}function wt(n,t){var i=sj_gx();i.open("POST",n,!0);i.setRequestHeader("accept","application/json");i.setRequestHeader("Content-Type","application/json");i.send(JSON.stringify(t))}function ft(){g&&(sb_ct(g),g=0)}function vi(){d&&(sb_ct(d),d=0)}function he(t){if(t&&t.query&&t.query!=""){b=n.Helper.InputTypes.ThreadHistory;var i=n.TWrap,r=i.genQueryEle(t.query);sj_evt.fire("cpltsrch_qry",t.query);et(t.query,n.Helper.InputTypes.ThreadHistory,null,i,r,null,null,"",null,null,t)}}function bt(o,s,h,c,l){var k,v,tt,y,d,g,nt;h===void 0&&(h=null);c===void 0&&(c="");l===void 0&&(l=!1);k=si;a&&(n.Composer.resetComposer(),n.Composer.focus(),ou&&sj_evt.fire("csComposerTurn",o),k&&(si=!1,co(),eu&&(u&&_ge("progContPlaceHolder")&&(_w.sj_disableProgRender=!0),sj_evt.fire("ajax.clearCache"))));p&&s!==n.Helper.InputTypes.SuggestionChip&&s!==n.Helper.InputTypes.Zero&&n.Composer.resetComposerLayoutDirection();fu&&!vt&&(n.ThreadsShared&&n.ThreadsShared.setConvUrl(t.conversationId,w),vt=!0);ft();vi();ht=Date.now();st=o;b=s;gi=h;n.ErrorState.hideErrorState();e=!1;n.SuggestionChips.setSuggestionChipId("");n.SuggestionChips.setSuggestionChips(null);r={};n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.QueryIssued,"inputType",s,"query",o,"displayedText",h);s!=n.Helper.InputTypes.Url&&s!=n.Helper.InputTypes.History&&f==1&&pr&&history&&history.pushState&&(v=new URL(location.href),tt=v.searchParams.get("Q")?"Q":"q",v.searchParams.set(tt,o),history.pushState({query:o},"",v));o&&o!=""&&(y=null,lf(i+1)&&!l&&(y=n.Helper.generateIGUID(),ce(o,i+1,y,s)),be(),d=n.TWrap,g=d.genQueryEle(o),sj_evt.fire("cpltsrch_qry",o,s),ci>0&&(nt=ci,k&&(nt+=16),g.style.scrollMargin=nt+"px"),et(o,s,h,d,g,"",null,"",null,c,null,y),sj_evt.fire("ShellGenerateResponse",s))}function ce(t,i,r,f){function v(t,r){t&&r&&r.appendTo(s);s.setAttribute("data-loaded","true");var u=(Date.now()-l).toString()+"ms";n.Helper.writeLog(n.Helper.ClientInst.AjaxAds,n.Helper.LogNames.AjaxAdsLoadTime,"t",u);o.forEach(function(t,r){var f=r.split(":"),e=f[0],u=f[1],o=parseInt(u,10);t==="adcallnotready"&&o===i&&(n.Helper.writeLog(n.Helper.ClientInst.AjaxAds,n.Helper.LogNames.AjaxAdsLoadedAfterIframe,"turnid",u),console.debug("requestCallBack firing AdsCopy for iframeid: "+e+" turnid: "+u),sj_evt.fire("AdsCopy",e,o))})}var l=Date.now(),e="/AdsFetch?q=".concat(encodeURIComponent(t),"&scenario=FullAdsMagazine&form=DEEPSH&FORM2=").concat(wf(f),"&cpltsrchif=1&turnindex=").concat(i,"&IG=").concat(r,"&IID=").concat("CopilotSearchAds","&SFX=").concat(++ie),c,s,h;bf("mockadsuse")?e+=kf(!0):bf("mockadssave")&&(e+=kf(!1));a&&(e+="&csic=1");u&&(e+="&cw="+window.innerWidth.toString(),e+="&ch="+window.innerHeight.toString());p&&(c=window.innerWidth>1268?1220:window.innerWidth-48,e+="&cw="+c.toString(),e+="&ch="+window.innerHeight.toString());s=sj_ce("div","ca_ads_magazine_".concat(i));s.classList.add("b_hide");h=_qs("#b_ads_magazine_container");h===null||h===void 0?void 0:h.appendChild(s);sj_ajax(e,{callback:v})}function et(n,r,u,f,e,o,s,c,l,a,y,p){var b,w;if(o===void 0&&(o=""),s===void 0&&(s=null),c===void 0&&(c=""),l===void 0&&(l=!1),a===void 0&&(a=""),y===void 0&&(y=null),p===void 0&&(p=null),tt){b=s||c?null:f.genTurnContainer(i,t.conversationId,v,e);io(n,!1,r,u,o,!!c,l,a).then(function(n){n.isSuccess?(s||c?f.compWrap(v,e,n.ajaxContainer,i,t.conversationId,s,c):b&&b.appendChild(n.ajaxContainer),sj_appHTML(n.ajaxContainer,n.ajaxContent),e&&kt(e)):(h("fail"),console.debug("Failed to create iso comp"))});return}w=null;y?(i=y.turnIndex,w=no(n,r,u,y)):w=to(n,!1,r,u,o,!!c,l,a,p);w.isSuccess?f.wrap(v,e,w.iframeCont,function(){kt(e)},i,t.conversationId,s,c):(h("fail"),console.debug("Failed to create iframe"))}function yi(r,u,f){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(s){switch(s.label){case 0:return e=!0,t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalAjaxSend),[4,n.SuggestionChips.updateSuggestionChips(r,f,function(){return u==nt})];case 1:return o=s.sent(),o||it||(ct&&r?n.ErrorState.errorHandler(n.ErrorState.ErrorType.SUGGESTION_KEY_RESULT_LOAD_FAILED,f):n.ErrorState.errorHandler(n.ErrorState.ErrorType.ERROR_OCCURRED,f)),o&&t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalAjaxValidResponse),c(o),o&&n.PerformanceHelper.markTurnSuggestionsChipReady(f,t.conversationId,i),typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Suggestion,o?n.Scraper.StatusType.Ready:n.Scraper.StatusType.Failed,o?"":"Suggestion chip api failed"),[2]}})})}function vu(t,r,u){return __awaiter(this,void 0,void 0,function(){var o,s,f,h,l;return __generator(this,function(){return e=!0,o=t.genStatus,s=t.chips,f=t.lookupKey,s&&s.length>0&&o.generationStatus==n.Helper.ChipsGenerationStatus.Success?(yu(f.lookupKey,s,u),Log===null||Log===void 0?void 0:Log.Log("SuggestionChipRendered","SCRender","ChipId: "+f,!1,"OvrIG",u),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{Event:"SCRender",ChipId:f+""},u)):o.generationStatus==n.Helper.ChipsGenerationStatus.Failure?(n.changeMode(n.Helper.CopilotMode.Float),it||(ct&&f?n.ErrorState.errorHandler(n.ErrorState.ErrorType.SUGGESTION_KEY_RESULT_LOAD_FAILED,u):n.ErrorState.errorHandler(n.ErrorState.ErrorType.ERROR_OCCURRED,u)),c(!1),typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Suggestion,n.Scraper.StatusType.Failed,"Suggestion chip generation failed"),h=o===null||o===void 0?void 0:o.generationStatusReason,l=n.Helper.GenerationStatusReason[h]!=undefined?n.Helper.GenerationStatusReason[h]:"Default",n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiFailure,"OvrIG",u,"GenStatusReason",l),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{GenStatusReason:l+"",Type:n.Helper.LogNames.SuggestionChipsApiFailure},u)):(f===null||f===void 0?void 0:f.lookupKey)&&yi(f.lookupKey,r,u),[2]})})}function yu(r,u,f){e=!0;n.SuggestionChips.renderSuggestionChips(r,u,f);c(!0);n.PerformanceHelper.markTurnSuggestionsChipReady(f,t.conversationId,i);t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalHitCache);Log===null||Log===void 0?void 0:Log.Log("SuggestionChipRendered","SCRender","HitCache",!1,"OvrIG",f);n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{Status:"CacheHit"},f);typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Suggestion,n.Scraper.StatusType.Ready)}function le(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return pi(n.data),[2]})})}function ae(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return pi(n[1]),[2]})})}function pi(f){var s,v,k;return __awaiter(this,void 0,void 0,function(){var d,ot,vt,pt,dt,ni,wt,ai,pi,ki,li,sr,ci,di,gi,yr,pr,tr,fi,wr,nu,br,bt,kr,tu,ti,si,ri,gt,ir,hi,dr,rr,ur,gr,or;return __generator(this,function(){if(d=f===null||f===void 0?void 0:f.data,ot=f===null||f===void 0?void 0:f.type,pe.indexOf(ot)>=0){if(hr&&ot==ku)return d&&d.query&&oo(d.query,n.Helper.InputTypes.Text),[2];if(at&&ot=="StreamProgress")return d&&d.eventName&&(d.eventName===ve?n.Composer.showStopStreamingButton():d.eventName===ye&&n.Composer.hideStopStreamingButton()),[2];if(d&&d.iframeid&&(vt=_ge(d.iframeid),pt=vt&&_qs(n.turnContainerElementName,vt),su=(pt===null||pt===void 0?void 0:pt.getAttribute("IG"))||"",vt&&pt)){if(dt=d.iframeid==y,ni=n.TWrap,wt=ni.queryEle(vt.parentElement),ot==bu)return ai=n.Citation,ai&&ai.show(d.citations,d.allSources),[2];if(ot==nf)return pi=n.Overlay,pi&&pi.show(d),[2];if(vr&&ot=="MagFollowup"&&d.query)return ki=vt.parentElement&&vt.parentElement.querySelector(".".concat(n.Helper.magFollowupClass)),ki&&(lt=ki.id),et(d.query,n.Helper.InputTypes.MagFollow,"",n.TWrap,null,"",null,d.iframeid),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.MagazineFollowupIssued),typeof _w.Log!="undefined"&&typeof Log.LogFilterFlare!="undefined"&&Log.LogFilterFlare(["magfollowup"]),[2];if(ot==tf&&d.url)return console.debug("Received readyToFetch signal"),n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.CacheOnlyRequestIssued,n.Helper.getImpressionId(d)),af(d,vt),[2];if(ot==gu){if(a&&h("reset"),li=n.ErrorState.handleIframeErrors(d),ar&&d&&d.url)return console.debug("Received fallback signal"),af(d,vt,!0),at&&n.Composer.hideStopStreamingButton(),n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ThinkStateError,n.Helper.getImpressionId(d)),typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Turn,n.Scraper.StatusType.Waiting,"".concat(n.Helper.LogNames.ThinkStateError,": ").concat((s=d.ErrorMsg)!==null&&s!==void 0?s:"unknown"),!0),rt&&[n.ErrorState.ErrorType.LIMIT_REACHED,n.ErrorState.ErrorType.UNAUTHORIZED].includes(li)&&sb_st(function(){var n=wi("#"+d.iframeid,li);n()},500),[2];d&&d.ErrorMsg&&(sr=wi("#"+d.iframeid,li),sr());at&&n.Composer.hideStopStreamingButton()}if(d.type==ff)return n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ContainerNoAnswer,n.Helper.getImpressionId(d)),c(!1),n.ErrorState.errorHandler(n.ErrorState.ErrorType.SEARCH_NO_RESULTS,n.Helper.getImpressionId(d)),bi(vt),[2];if(ci=function(){var n,t,i;vt.parentElement&&(t=((n=oi[d.iframeid])===null||n===void 0?void 0:n.impressionID)||d.impressionID,dt&&ui?(i=_qs(".ca_feedback",wt),i&&wt.removeChild(i),ni.addFeedbackToTurn(vt.parentElement,t)):dt||ni.addFeedbackToTurn(vt.parentElement,t))},ot==ef){if(ut&&(ei?(di=((v=oi[d.iframeid])===null||v===void 0?void 0:v.impressionID)||d.impressionID,dt&&ui?(gi=_qs(".ca_action_menu",wt),gi&&wt.removeChild(gi),ni.addActionMenu(vt.parentElement,di,d.ansType)):dt||ni.addActionMenu(vt.parentElement,di,d.ansType)):ci()),d.ansType&&d.iframeid&&(l[d.iframeid]=l[d.iframeid]||{iframeid:d.iframeid},l[d.iframeid].ansType=d.ansType,typeof n.FeedbackData!="undefined"&&typeof n.FeedbackData.enrichTurnSHFeedbackData=="function"&&n.FeedbackData.enrichTurnSHFeedbackData(l[d.iframeid])),ru&&i===1&&!dt){if(!wt||!wt.innerText||wt.innerText.trim()==="")return[2];b!==n.Helper.InputTypes.ThreadHistory&&(yr=wt.innerText,pr={query:yr,conversationId:t.conversationId,conversationSignature:w,turnIndex:i},sj_evt.fire("ShellReceiveAnswerType",d.ansType,"SaveThread",pr))}else sj_evt.fire("ShellReceiveAnswerType",d.ansType);return[2]}if(ot==sf&&ei)return sj_evt.fire("ShellCopyData",d.copyContent),[2];if(yt&&ot==hf&&(tr=d===null||d===void 0?void 0:d.selectedText,tr&&(n.AttachmentManager.addAttachment({quote:tr,type:n.AttachmentManager.AttachmentType.Quote}),n.Composer.focus())),ot==cf&&(d.type==="AdReadyToCopy"?(console.debug("handleMessage firing AdsCopy for iframeid: "+d.iframeid+" turnIndex: "+i),sj_evt.fire("AdsCopy",d.iframeid,i)):d.type==="AdRenderComplete"&&(o.set("".concat(d.iframeid,":").concat(i),"adcallcompleted"),dt&&(sj_evt.fire("frameReadyToReplace",d.iframeid),ut||ci(),y=""))),fi=nt==d.iframeid,fi&&ot==uf&&(wr=d.timestamp-performance.timeOrigin,n.PerformanceHelper.markTurnVisuallyReady(d.impressionID,t.conversationId,i,wr),typeof n.Scraper!="undefined"&&(nu=vt.getAttribute("fallback")!=null,n.Scraper.updateStatus(i,n.Scraper.ContentType.Turn,n.Scraper.StatusType.Ready)),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.TraceIdDebug,"OvrIG",r===null||r===void 0?void 0:r.shLoadingIg1,"shLoadingIg1",r===null||r===void 0?void 0:r.shLoadingIg1,"shLoadingEventId1",r===null||r===void 0?void 0:r.shLoadingEventId1,"shLoadingIg2",r===null||r===void 0?void 0:r.shLoadingIg2,"shLoadingEventId2",r===null||r===void 0?void 0:r.shLoadingEventId2,"shTlwEventId",r===null||r===void 0?void 0:r.shTlwEventId),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.TraceIdData,"CSearch",{CSearchImpressionId:r===null||r===void 0?void 0:r.shLoadingIg1,CSearchEventId:r===null||r===void 0?void 0:r.shLoadingEventId1,CSearch2ImpressionId:r===null||r===void 0?void 0:r.shLoadingIg2,CSearch2EventId:r===null||r===void 0?void 0:r.shLoadingEventId2,ShTlwEventId:r===null||r===void 0?void 0:r.shTlwEventId,ResponseId:i+"-"+t.conversationId},r===null||r===void 0?void 0:r.shLoadingIg1),h("reset")),ot=="CopilotSearchPerformanceData"&&d.eventName&&d.timestamp&&d.turnIndex===i)switch(d.eventName){case"shFirstGenSerpToken":n.PerformanceHelper.markFirstTokenRender(d.impressionId,t.conversationId,i,d.timestamp);break;case"shFirstToken":n.PerformanceHelper.markFirstThinkingToken(d.timestamp);break;case"TimeToResultsReady":n.PerformanceHelper.markLastTokenRender(d.timestamp);break;case"StreamAjaxSend":n.PerformanceHelper.markStreamAjaxSend(d.timestamp)}if(fi&&(ht&&(br=Date.now()-ht,n.Helper.writeOverrideLog(n.Helper.ClientInst.Perf,n.Helper.LogNames.CopilotAnswerLoadTime,n.Helper.getImpressionId(d),"latency",br+""),ht=0),vi(),e||(ft(),g=sb_st(function(){e||(e=!0,g=0,n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.NoChipMsg,n.Helper.getImpressionId(d)),c(!1),it||n.ErrorState.errorHandler(n.ErrorState.ErrorType.CS_ANSWER_SUGGESTION_KEY_TIMEOUT),t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalTimeout))},nr))),ot==du&&(d.iframeid&&(l[d.iframeid]=l[d.iframeid]||{iframeid:d.iframeid},bt=l[d.iframeid],d.shConversationId&&(bt.shConversationId=d.shConversationId),d.shQueryId&&(bt.shQueryId=d.shQueryId),d.shLoadingIg&&(bt.shLoadingIg=d.shLoadingIg),d.shLoadingEventId&&(bt.shLoadingEventId=d.shLoadingEventId),d.shResultsIg&&(bt.shResultsIg=d.shResultsIg),d.shResultsEventId&&(bt.shResultsEventId=d.shResultsEventId),d.shTlwEventId&&(bt.shTlwEventId=d.shTlwEventId),d.csConversationId&&(bt.csConversationId=d.csConversationId),d.answerSourceOptDoc&&(bt.answerSourceOptDoc=d.answerSourceOptDoc),d.answerSources&&(bt.answerSources=d.answerSources)),typeof Feedback!="undefined"&&typeof Feedback.Hooks!="undefined"?n.FeedbackData.enrichTurnSHFeedbackData(d):sj_evt.bind("feedbackInitialized",function(){n.FeedbackData.enrichTurnSHFeedbackData(d)},1),n.TurnDataHelper.populateCsTurnDataObject(d,r)),ot==rf&&typeof n.Ladybug!="undefined"&&typeof n.Ladybug.processLadybugData=="function"&&n.Ladybug.processLadybugData(d,st),ot=="StreamScrapingData"&&typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.StreamedMetadata,n.Scraper.StatusType.Ready,JSON.stringify((k=d.metadata)!==null&&k!==void 0?k:"")),ot=="CopilotAdsStubTriggeredAds"&&"adsTriggered"in d&&typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Ads,d.adsTriggered===!0?n.Scraper.StatusType.Ready:n.Scraper.StatusType.Absent),ot=="FullyFormedQuery"&&(kr=d.query,tu=d.iframeid,t.fullFormedQuery=kr),ot==wu)h("chips"),fi&&ft(),!e&&fi&&(ti=d.key,si=d.suggestionChipResponse,ri=si===null||si===void 0?void 0:si.chips,gt=pt.getAttribute("IG"),Log===null||Log===void 0?void 0:Log.Log("SuggestionChipRendered","PostMReceived","ChipId: "+ti,!1,"OvrIG",gt),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{Event:"PostMReceived",ChipId:ti+""},gt),er&&si?vu(si,d.iframeid,gt):fr&&ri&&Array.isArray(ri)&&ri.length>0?(yu(ti,ri,gt),Log===null||Log===void 0?void 0:Log.Log("SuggestionChipRendered","SCRender","ChipId: "+ti,!1,"OvrIG",gt),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{Event:"SCRender",ChipId:ti+""},gt)):ti?yi(ti,d.iframeid,gt):(n.changeMode(n.Helper.CopilotMode.Float),it||n.ErrorState.errorHandler(n.ErrorState.ErrorType.ERROR_OCCURRED,gt),e=!0,c(!1),typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Suggestion,n.Scraper.StatusType.Failed,"Suggestion chips failed")),t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalPostReceived),ri&&Array.isArray(ri)&&ri.length>0?t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalPostReceivedHasChips):t.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalPostReceivedOnlyKey));else if((d===null||d===void 0?void 0:d.type)&&(d.type=="TOPV2W"||d.type=="MOBILE"||d.type=="NOANS"||d.type=="TOP"||d.type=="NORESULTS")){if(d.type=="NORESULTS"&&h("reset"),d.type=="NOANS")return fi&&ft(),n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ResultsEmpty,n.Helper.getImpressionId(d)),c(!1),n.ErrorState.errorHandler(n.ErrorState.ErrorType.SEARCH_NO_RESULTS,n.Helper.getImpressionId(d)),bi(vt),[2];d.height&&d.width&&(ir=parseInt(d.height),hi=parseInt(d.width),ir&&hi&&(pt.style.height=ir+"px",u||p?pt.style.width=hi+"px":(dr=(ct?Math.max(hi,1200):hi)+20,pt.style.width=dr+"px"),!u||d.noScroll||ii||kt(wt),u&&!tt&&cr&&Math.abs(hi-_w.innerWidth)>=5&&(rr=n.Base,rr&&rr.resize(pt,d.iframeid))),lr||u||d.noScroll||kt(wt),ot==pu&&(sb_st(function(){Lib.CssClass.remove(vt,n.Helper.loadingClassName)},0),n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ResponseRendered,n.Helper.getImpressionId(d)),ut||ci(),tt||(ur=pt.contentWindow.document.querySelector("ol li"),ur&&(ur.style.borderRadius="0px")),d.impressionID&&(pt.setAttribute("IG",d.impressionID),oi[d.iframeid]={impressionID:d.impressionID},dt?we(d.iframeid)&&(n.Ladybug&&typeof n.Ladybug.addFallbackImpressionData=="function"&&n.Ladybug.addFallbackImpressionData(d.impressionID,d.eventID,d.query,d.url),or={iframeid:d.iframeid,shLoadingIg:d.impressionID,shLoadingEventId:d.eventID},n.FeedbackData&&typeof n.FeedbackData.enrichTurnSHFeedbackData=="function"&&n.FeedbackData.enrichTurnSHFeedbackData(or),n.TurnDataHelper&&typeof n.TurnDataHelper.populateCsTurnDataObject=="function"&&n.TurnDataHelper.populateCsTurnDataObject(or,r)):(gr=pt.parentElement.previousElementSibling,ni.inst(gr,d.impressionID))),d.forceShowAllButton&&ni.showAll(vt.parentElement),!dt||lf(i)&&o.get("".concat(d.iframeid,":").concat(i))!=="adcallcompleted"||(sj_evt.fire("frameReadyToReplace",d.iframeid),ut||ci(),y="")))}}}return[2]})})}function lf(n){return hi&&(hu||n===1)}function we(n){var t;return((t=_ge(n))===null||t===void 0?void 0:t.getAttribute("fallback"))==="1"}function af(t,i,r){var u,f;r===void 0&&(r=!1);u=new URL(t.url);u.origin!=window.location.origin&&(f=u.href.slice(u.href.indexOf(u.origin)+u.origin.length),u=new URL(window.location.origin+f));lt!=t.iframeid&&(lt=t.iframeid,i.setAttribute("replacing","1"),et(u.searchParams.get("q"),null,"",n.TWrap,null,u.href,i,"",r))}function be(){var t;(t=_qs(".suggestion_wrapper"))===null||t===void 0?void 0:t.classList.add(n.Helper.hiddenClassName)}function c(t){var i;t&&((i=_qs(".suggestion_wrapper"))===null||i===void 0?void 0:i.classList.remove(n.Helper.hiddenClassName))}function kt(t){i===1&&nu||(sj_evt.fire("ShellTurnScroll"),sb_st(function(){var c=!u&&n.Threads&&ot,f=t,e,o,s,h,r;cu&&a&&i===1&&(e=ke(),e&&(f=e));ir?(o=f.getBoundingClientRect(),c?(s=ot.getBoundingClientRect(),ot.scrollTo({top:ot.scrollTop+o.top-s.top,left:0,behavior:"smooth"})):window.scrollTo({top:window.scrollY+o.top,left:0,behavior:"smooth"})):wr?(h="scrollBehavior"in _d.documentElement.style,r=_d.body,h?r.scrollTo({top:r.scrollHeight-_w.innerHeight,left:0,behavior:"smooth"}):r.scrollTo({top:r.scrollHeight-_w.innerHeight,left:0})):f.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})},100))}function ke(){var t=_d.querySelector("#b_results .b_rs"),r;if(t)return li&&typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare(["scrlllasts_boprs"]),t;var i=[{selector:"#b_results .b_adBottom .b_adLastChild:last-of-type",type:"ad"},{selector:"#b_results > li:nth-last-child(1 of li.b_algo)",type:"algo"},{selector:"#b_results > li:nth-last-child(1 of li.b_ans)",type:"answer"}].map(function(n){var u=n.selector,f=n.type,t=_d.querySelector(u),i,r;return t?(i=t.getBoundingClientRect(),r=i.top+window.scrollY,{element:t,position:r,type:f}):null}).filter(function(n){return n!==null}),n=i.reduce(function(n,t){return t.position>n.position?t:n},i[0]);return n?(li&&typeof Log!="undefined"&&Log.LogFilterFlare&&(r={ad:"scrolllastsans_ad",algo:"scrolllastsans_algo",answer:"scrlllasts_answer"},Log.LogFilterFlare([r[n.type]])),n.element):null}function wi(t,r){return function(){var u;n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ResponseFailed,"turnIndex",i.toString());c(!1);!rt||((u=_ge(t))===null||u===void 0?void 0:u.getAttribute("fallback"))||n.ErrorState.errorHandler(r);yf(t);console.debug("Iframe error: "+r)}}function bi(t){var f,e,r,s,o,u;if(h("fail"),t)if(ii&&(e=t.closest(".ca_turn"),e&&(e.style.minHeight="initial")),rt||t.getAttribute("fallback"))for(s=t.parentElement,vf(t),o=s.querySelectorAll("[replacing]"),u=0;u<o.length;u++)vf(o[u]);else r=(f=t.closest(".ca_turn"))===null||f===void 0?void 0:f.querySelector(".ca_userquery_text"),r&&r.innerText&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.TriggerFailureFallback,"turnIndex",i.toString()),et(r.innerText,null,"",n.TWrap,null,null,t,null,!0),typeof n.Scraper!="undefined"&&n.Scraper.updateStatus(i,n.Scraper.ContentType.Turn,n.Scraper.StatusType.Waiting,"Shell failure go to fallback",!0))}function vf(t){di?t.parentElement.removeChild(t):Lib.CssClass.add(t,n.Helper.hiddenClassName)}function yf(n){var t=_qs(n);bi(t)}function de(t){return function(){var r;n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ResponseTimeout,"turnIndex",i.toString());c(!1);rt&&(((r=_ge(t))===null||r===void 0?void 0:r.getAttribute("fallback"))?iu?n.ErrorState.errorHandler(n.ErrorState.ErrorType.SEARCH_TIMEOUT_FALLBACK):n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.Error,"ErrorType",n.ErrorState.ErrorType.SEARCH_TIMEOUT_FALLBACK):n.ErrorState.errorHandler(n.ErrorState.ErrorType.SEARCH_TIMEOUT));d=0;yf(t)}}function pf(t){var i=_d.createElement("iframe"),r=n.ErrorState.ErrorType.SEARCH_FAILED;return b!==n.Helper.InputTypes.ThreadHistory&&(i.onerror=wi(t,r),d=sb_st(de(t),dt)),i}function ki(i,r,f,e,o,s,h,c,l,v,b){var nt,tt,it,g,rt,ut,ft,et,vt,ot,wt,st,bt,ht,kt;o===void 0&&(o="");s===void 0&&(s="");h===void 0&&(h=!1);c===void 0&&(c=!1);l===void 0&&(l="");v===void 0&&(v=null);b===void 0&&(b=null);var ct=n.Helper.getValueFromUrl("iffeatures"),lt=wf(f),d,dt=(nt=v===null||v===void 0?void 0:v.conversationId)!==null&&nt!==void 0?nt:t.conversationId,ni=(tt=v===null||v===void 0?void 0:v.conversationSignature)!==null&&tt!==void 0?tt:w,ti=(it=v===null||v===void 0?void 0:v.turnIndex)!==null&&it!==void 0?it:r,at=v!=null;return s?(d=new URL(s),d.searchParams.set("iframeid",e.id),y=e.id):(g="https://".concat(k,"/search?q=").concat(encodeURIComponent(i),"&cpltsrchif=").concat(h?"2":"1","&convid=").concat(encodeURIComponent(dt),"&convsig=").concat(encodeURIComponent(ni),"&showselans=1&showonly=").concat(gt,"&iframeid=").concat(e.id,"&turnindex=").concat(ti,"&dissrchswrit=1&input=").concat(f,"&suggText=").concat(o),br&&(g+="&csm="+n.ComposerModelSwitching.getCurrentModel()),b&&(g+="&IG=".concat(b)),kr&&r===1&&(!dr||f!==n.Helper.InputTypes.Scope)&&(rt=n.Helper.getValueFromUrl(pt?"q":"pq"),rt&&(g+="&pq=".concat(rt))),gr&&(ut=n.Helper.getValueFromUrl("testhooks"),ut&&(g+="&testhooks=".concat(ut)),ft=n.Helper.getValueFromUrl("uncrunched"),ft&&(g+="&uncrunched=".concat(ft)),et=n.Helper.getValueFromUrl("dbgtrace"),et&&(g+="&dbgtrace=".concat(et))),d=new URL(encodeURI(g)),ur?d.searchParams.set("clientip","183.204.169.10"):rr&&new URL(_w.location.href).searchParams.forEach(function(n,t){["clientip"].includes(t)&&d.searchParams.set(t,n)}),h&&(y=e.id,ri&&n.Helper.setParamIfNotExist(d,"filters",'arbmgzonly:"1"')),c||h&&!ri||(yr&&f===n.Helper.InputTypes.Zero?(n.Helper.setParamIfNotExist(d,"cszicache","1"),l&&(d.search+="&filters="+l)):at&&f===n.Helper.InputTypes.ThreadHistory?n.Helper.setParamIfNotExist(d,"csrepturn","1"):n.Helper.setParamIfNotExist(d,"shm","cr"),n.Helper.setParamIfNotExist(d,"FORM","DEEPSH")),ge(d)),u&&(n.Helper.setParamIfNotExist(d,"cw",window.innerWidth.toString()),n.Helper.setParamIfNotExist(d,"ch",window.innerHeight.toString())),p&&(vt=window.innerWidth>1268?1220:window.innerWidth-48,n.Helper.setParamIfNotExist(d,"cw",vt.toString()),n.Helper.setParamIfNotExist(d,"ch",window.innerHeight.toString())),ct&&n.Helper.setParamIfNotExist(d,"features",ct),lt&&n.Helper.setParamIfNotExist(d,"FORM2",lt),ot=n.Helper.getValueFromUrl("safesearch"),ot&&n.Helper.setParamIfNotExist(d,"safesearch",ot),!at&&or&&crypto&&crypto.randomUUID&&(sr?d.searchParams.set("shmgid",crypto.randomUUID()):n.Helper.setParamIfNotExist(d,"shmgid",crypto.randomUUID())),yt&&d.searchParams.has("quote")&&(wt=d.searchParams.get("quote")||"",d.searchParams.set("q",encodeURIComponent(i+" ")+wt)),c&&(n.Helper.setParamIfNotExist(d,"traffictype","searchharderretrybfpr"),n.Helper.setParamIfNotExist(d,"sherr","1"),e.setAttribute("fallback","1"),y=e.id),st=n.Helper.getValueFromUrl("client"),st&&n.Helper.setParamIfNotExist(d,"client",st),bt=n.Helper.originalUrl?new URL(n.Helper.originalUrl):new URL(_w.location.href),bt.searchParams.forEach(function(t,i){var f,r;i.indexOf("csif")==0&&(f=encodeURIComponent(i.substring(4)),r=encodeURIComponent(t),n.Helper.setParamIfNotExist(d,f,r));u&&i=="darkschemeovr"&&(r=encodeURIComponent(t),n.Helper.setParamIfNotExist(d,i,r))}),tr&&n.Helper.setParamIfNotExist(d,"p1","[AppHost%20WriteAllPluginLogs=%22true%22%20Verbose=%22true%22]"),ht=n.Debug,ht&&ht.refine(d),a&&n.Helper.setParamIfNotExist(d,"csic","1"),lu&&(kt=n.Helper.isDarkMode?"1":"0",n.Helper.setParamIfNotExist(d,"forcethemeonce",kt)),d}function ge(t){var r,i;if(n.AttachmentManager&&(r=n.AttachmentManager.getAttachmentList(),r&&r.length!==0))if(i=r[0],i.type==n.AttachmentManager.AttachmentType.Image){if(i.bcid){n.Helper.setParamIfNotExist(t,"bcid",i.bcid);return}i.url&&n.Helper.setParamIfNotExist(t,"imgUrl",i.url)}else yt&&i.type==n.AttachmentManager.AttachmentType.Quote&&n.Helper.setParamIfNotExist(t,"quote",encodeURIComponent(i.quote))}function no(t,i,r,e){var s,c,l;r===void 0&&(r="");var a=!1,o=sj_ce("div",undefined,"frame_cont"),h="cplt_frame_"+e.turnIndex;return f=Math.max(f,e.turnIndex+1),nt=h,o.id=h,s=pf("#"+h),s.setAttribute("aria-label",t+" "+ni.iframeResultContainerAriaLabel),ti&&s.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation"),Lib.CssClass.remove(o,n.Helper.loadingClassName),o.appendChild(s),k&&t&&(u&&(gt="top"),c=ki(t,e.turnIndex,i,o,r,"",!1,!1,"",e),l=n.Debug,l&&l.mockThreadLoad(c),s.src=decodeURI(c.href),a=!0),{iframeCont:o,isSuccess:a}}function to(t,r,u,e,o,s,c,l,a){var v,b,p,y,w,d;return e===void 0&&(e=""),o===void 0&&(o=""),s===void 0&&(s=!1),c===void 0&&(c=!1),l===void 0&&(l=""),a===void 0&&(a=null),h("start"),v=sj_ce("div",undefined,"frame_cont"),i=ho(),o||c||s||i++,b=fi?i:f,p="cplt_frame_"+f++,nt=p,v.id=p,s&&Lib.CssClass.add(v,n.Helper.magFollowupClass),y=pf("#"+p),y.setAttribute("aria-label",t+" "+ni.iframeResultContainerAriaLabel),ti&&y.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation"),Lib.CssClass.add(v,n.Helper.loadingClassName),v.appendChild(y),w=!1,k&&t&&(d=ki(t,b,u,v,e,o,s,c,l,null,a),y.src=decodeURI(d.href),w=!0),{iframeCont:v,isSuccess:w}}function io(t,r,u,e,o,s,c,l){return e===void 0&&(e=null),o===void 0&&(o=""),s===void 0&&(s=!1),c===void 0&&(c=!1),l===void 0&&(l=""),__awaiter(this,void 0,void 0,function(){var r,w,y,a,p,b,v,d;return __generator(this,function(g){switch(g.label){case 0:if(h("start"),r=sj_ce("div",undefined,"frame_cont"),o||c||s||i++,w=fi?i:f,y="cplt_frame_"+f++,nt=y,r.id=y,s&&Lib.CssClass.add(r,n.Helper.magFollowupClass),a="",p=!1,!(k&&t))return[3,6];b=ki(t,w,u,r,e,o,s,c,l);v=void 0;g.label=1;case 1:return g.trys.push([1,3,,4]),[4,fetch(decodeURI(b.href))];case 2:return(v=g.sent(),!v.ok)?[2,{ajaxContainer:r,ajaxContent:a,isSuccess:!1}]:[3,4];case 3:return d=g.sent(),[2,{ajaxContainer:r,ajaxContent:a,isSuccess:!1}];case 4:return[4,v.text()];case 5:a=g.sent();p=!0;g.label=6;case 6:return[2,{ajaxContainer:r,ajaxContent:a,isSuccess:p}]}})})}function wf(t){t=t||b;switch(t){case n.Helper.InputTypes.Url:return n.Helper.getValueFromUrl("form",window.location.href.toLowerCase());case n.Helper.InputTypes.SuggestionChip:return a?"ICSUGG":"CSSUGG";default:return a?"ICSBOX":"CSSBOX"}}function bf(t){var i=n.Helper.getValueFromUrlNormalized(t,window.location.href.toLowerCase());return i=="1"}function kf(t){var i=n.Helper.getValueFromUrlNormalized("mockadstitle",window.location.href),r=n.Helper.getValueFromUrlNormalized("longsave",window.location.href.toLowerCase());return i?t?'&features=pdsmockadsre&p1=[UseMockAds%20Enabled="1"%20Title=%22'.concat(i,"%22]"):'&features=&p1=[MockAdsSave%20Enabled="1"%20Title=%22'.concat(i,"%22").concat(r?'%20TTL="1999999998"%20LockTitleValues="1"':"","]"):""}function ro(){if(st){n.Composer.onUpdate(n.Helper.CopilotSearchState.Retry);uo();bt(st,b,gi,"",!0);n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.RetryButtonClicked)}}function uo(){var t=_qs(".ca_container");(t===null||t===void 0?void 0:t.lastElementChild)&&(f=f-1,fo(),t.removeChild(t.lastElementChild),n.changeMode(n.Helper.CopilotMode.Turn))}function fo(){o.forEach(function(t,r){var u=r.split(":"),s=u[0],f=u[1],e=parseInt(f,10);e===i&&(n.Helper.writeLog(n.Helper.ClientInst.AjaxAds,n.Helper.LogNames.AjaxAdsErrorStateDroppedAds,"turnid",f),o.set(r,"adcallcompleted"))})}function eo(n,t){var i;return function(){for(var f=this,u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];i&&sb_ct(i);i=sb_st(function(){return n.apply(f,u)},t)}}function oo(n,t){df(n,t)}function so(){var n=_d.querySelector(".ca_turn:last-of-type");n&&(n.style.minHeight="unset")}function ho(){var t=_d.querySelector(".ca_turn:last-of-type"),n;return t?(n=parseInt(t.getAttribute("turnid")||"0",10),isNaN(n)?0:n):0}function co(){var f=_qs(".b_pag"),i,n,t,r;f&&(f.style.display="none");i=_ge("b_footer");i&&(i.style.display="none");n=_qs(".b_wrapper");n&&(n.classList.remove("hide"),n.classList.add("show"));t=_ge("b_bop_pin_placehold");t&&(u||(t.style.display="none"),Lib.CssClass.add(t,"b_bop_nofooter"));r=_qs(".b_bop_cs_sb");r&&Lib.CssClass.add(r,"dynamic");sj_evt.fire("csInlineSearchTrig")}var k=window.location.hostname,ot=_qs(".b_contentScroller"),v,u=!1,p=!1,di=!0,w="",f=1,i=0,st="",b,gi="",d=0,g=0,nr=0,e=!1,nt="",dt=0,ht=0,ct=!1,gt="topv2w",tr=!1,ir=!1,tt=!1,rr=!1,ur=!1,fr=!1,er=!1,ni,gf=!1,or=!1,sr=!1,hr=!1,cr=!1,ti=!1,it=!1,lr=!1,ar=!1,ii=!1,lt="",y="",vr=!1,ri=!1,yr=!1,pr=!1,wr=!1,ui=!1,fi=!1,r={},br=!1,rt=!1,at=!1,kr=!1,dr=!1,gr=!1,ne=!1,ei=!1,ut=!1,nu=!1,tu=!1,iu=!1,ru=!1,oi={},uu="",vt=!1,fu=!1,yt=!1,l={},te=!1,pt=!1,a=!1,eu=!1,ou=!1,su="",si=!0,hi=!1,hu=!1,o=new Map,ie=0,ci=-1,cu=!1,li=!1,lu=!1,s,ai,df;t.conversationId="";t.getFrameIG=re;t.initConversation=ue;s=0;ai="csTurnState";t.resetConversation=au;t.fullFormedQuery=null;t.emitScFetchMdmEvent=function(t){return wt(n.Helper.suggestionchipSendMonitorEndpoint,{fetchType:t})};t.emitcopilotSearchSCFetchRetry=function(t){return wt(n.Helper.copilotSearchSCFetchRetryMonitorEndpoint,{time:t})};t.emitcopilotSearchSCLatency_TTVR=function(t){return wt(n.Helper.copilotSearchSC_TTVR_MonitorEndpoint,{time:t})};t.emitcopilotSearchSCFetchStatus=function(t,i){return wt(n.Helper.copilotSearchSCFetchStatusMonitorEndpoint,{genStatusType:t,genStatusReason:i})};t.generateHistoricalTurn=he;t.generateCopilotResponse=bt;t.loadSuggestionChipsByApi=yi;t.loadSuggestionChipsV2=vu;var pu="AnswerCardDimensionUpdate",wu="CopilotAnswerSGID",bu="CitationPopup",ku="CopilotAnswerRequeryClick",du="CopilotSearchDebugData",gu="ThinkStateError",nf="CopilotOverlay",tf="CopilotSearchReadyToFetch",rf="CopilotSearchLadybugData",uf="IframeTTVR",ve="StreamStarted",ye="StreamCompleted",ff="ContainerNoAnswer",ef="CopilotAnswerType",sf="GenAnsCopyData",hf="GenAnsQuoteToFollow",cf="CopilotCopyAds",pe=[pu,"AnswerCardResize",wu,bu,ku,du,gu,nf,tf,uf,rf,ff,ef,sf,"MagFollowup","CopilotSearchPerformanceData","CaptchaStatusUpdate","StreamScrapingData","StreamProgress","FullyFormedQuery","CopilotAdsStubTriggeredAds",hf,cf];t.retryLastTurn=ro;df=eo(function(t,i){n.getMode()!==n.Helper.CopilotMode.Turn&&n.changeMode(n.Helper.CopilotMode.Turn);bt(t,i)},300);t.cleanUpTurnSpacing=so})(t=n.Conversation||(n.Conversation={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function ii(t){var l,w,d,it,rt,ut,ft,at,dt,ni,ti,ii,ri,ui,fi,ei;(et=t.locStrings.zeroInputSearchBoxAskMeAnything,ot=t.locStrings.copilotSearchBoxFollowUp,i=_d.querySelector("#b_copilot_search .composer_wrapper textarea"),i)&&(f=_d.querySelector(".composer_wrapper .b_copilot_icon"),r=_d.querySelector("#b_copilot_search .b_copilot_send"),o=_d.querySelector("#b_copilot_search .b_copilot_stop_streaming"),a=_d.querySelector("#b_copilot_search .composer_inner_wrapper"),c=_d.querySelector("#b_copilot_search .composer_container"),e=(l=t.enableAttachment)!==null&&l!==void 0?l:!1,st=(w=t.enableCopyButtonShow)!==null&&w!==void 0?w:!1,ht=t.enableRewardsReportActivity,u=(d=t.isSERPVertical)!==null&&d!==void 0?d:!1,ct=(it=t.goToSERP)!==null&&it!==void 0?it:!1,s=(rt=t.enableSERPComposerNewTab)!==null&&rt!==void 0?rt:!1,vt=(ut=t.enableSERPComposerInst)!==null&&ut!==void 0?ut:!1,lt=(ft=t.enableFeedbackShowAfterStreaming)!==null&&ft!==void 0?ft:!1,k=(at=t.serpComposerFormCode)!==null&&at!==void 0?at:"",h=(dt=t.isMiniSERP)!==null&&dt!==void 0?dt:!1,yt=(ni=t.query)!==null&&ni!==void 0?ni:"",y=(ti=t.enableSideAlignedComposer)!==null&&ti!==void 0?ti:!1,p=(ii=t.enableSERPChat)!==null&&ii!==void 0?ii:!1,pt=(ri=t.fromSerpComposer)!==null&&ri!==void 0?ri:!1,wt=(ui=t.enableAutoSuggestFilterFlare)!==null&&ui!==void 0?ui:!1,bt=(fi=t.enableNewMultiTurnOverlayMode)!==null&&fi!==void 0?fi:!1,kt=(ei=t.logSubmitStatus)!==null&&ei!==void 0?ei:!1,sj_be(i,"input",g),sj_be(i,"keypress",gt),sj_be(i,"focus",ai),sj_be(i,"blur",vi),t.enableComposerPasteHandler&&n.ComposerPasteHandler&&sj_be(i,"paste",n.ComposerPasteHandler.onComposerPaste),e&&(n.AttachmentView.bindAttachmentEventsUI(),n.AttachmentDragDrop.initDragAndDrop()),sj_be(r,"click",function(t){n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.ComposerSubmitButtonClicked);nt(t)}),o&&sj_be(o,"click",function(){var t=n.Helper.getLastTurnId(),u={type:"CopilotSearchStreamingStop",data:{turnId:t}},i=n.Helper.getResponseId();CopilotSearchMessager.postMessageToTurn(t,i,u);n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.StopStreamingClick,"responseId",i);tt();lt&&n.TWrap.addFeedbackToTurn();r.disabled=!1;v=!1;n.Conversation.cleanUpTurnSpacing();n.ErrorState.errorHandler(n.ErrorState.ErrorType.STREAMSTOPPED);st&&sj_evt.fire("ShellStopStreaming")}),y&&(window.addEventListener("resize",b),b()),n.ComposerMenu.init(u,s,k),t.enableModelSwitching&&n.ComposerModelSwitching.init(),sj_evt.bind("csTurnState",function(n){if(n&&n.length>1){var t=n[1];t=="start"?(r.disabled=!0,v=!0):(r.disabled=!1,v=!1)}}))}function ri(){return v}function l(){if(i){i.value="";i.style.height="auto";var t=n.getMode()===n.Helper.CopilotMode.Zero;t?i.setAttribute("placeholder",et):i.setAttribute("placeholder",ot);o&&tt();f&&f.classList.remove(n.Helper.hiddenClassName);u&&(p&&w(),sj_evt.fire(rt));r.classList.add(n.Helper.hiddenClassName);d()}}function ui(){sj_evt.fire("csTurnState","reset")}function d(){a&&a.classList.remove(ft)}function dt(){l();w()}function fi(){var t=_qs("#b_copilot_search .chip_btn.back_btn");sj_be(t,"click",function(){n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.BackButtonClicked);n.changeMode(n.Helper.CopilotMode.Turn)});l();w()}function w(){setTimeout(function(){i&&i.focus()},0)}function ei(){}function oi(t){var i=n.Helper.CopilotSearchState;t===i.Error?ei():t===i.FloatingZeroPage?fi():t===i.FloatCompose?dt():t===i.BlankInput&&dt()}function g(){var t;if(i){typeof Log!="undefined"&&Log.LogFilterFlare&&wt&&Log.LogFilterFlare(["BOP_Input_Received"]);i.value===""?r.classList.add(n.Helper.hiddenClassName):r.classList.remove(n.Helper.hiddenClassName);t=1;i.setAttribute("rows",t.toString());var u=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-top").split("px")[0])||12,f=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-bottom").split("px")[0])||12,o=parseInt(window.getComputedStyle(i,null).getPropertyValue("line-height").split("px")[0])||22;t=Math.max(1,Math.ceil((i.scrollHeight-u-f)/o));(t>1||e&&n.AttachmentManager.hasAttachment())&&a.classList.add(ft);requestAnimationFrame(function(){e&&n.AttachmentView.autoSizeAttachmentContainerUI();i.style.height="auto";i.style.height=i.scrollHeight+"px";e&&n.AttachmentView.resizeAttachmentUI(i.scrollHeight)})}}function gt(t){t.shiftKey||t.key!=="Enter"||nt(t);t.shiftKey&&t.key==="Enter"&&(t.preventDefault(),!i.value||it.test(i.value)||(i.value+="\r\n",g()));t.key!="Enter"&&u&&!at&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"ComposerInput"),at=!0)}function nt(t){var f,o,s;if(t.preventDefault(),!i.value||it.test(i.value)||r.disabled!==!1)kt&&(s=r.disabled?"ComposerSubmitDisabled":"ComposerSubmitEmpty",n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,s));else if((u||p||h)&&typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare(["webco_composersubmit"]),!p&&(u||h))f=i.value.trim(),n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"ComposerSubmit","query",f),ct?hi(f):ci(f);else{if(o=n.getMode()===n.Helper.CopilotMode.Zero,pt&&n.Helper.getLastTurnId()==null&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",n.Helper.getConversationId()),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.ConversationStart)),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart),o&&(n.changeMode(n.Helper.CopilotMode.Turn),n.ZeroPage.hide()),bt&&typeof sj_evt!="undefined"&&typeof _w._bingMultiTurnEmitter!="undefined"){n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"MultiTurnOverlayTriggered","query",i.value,"inputType","Composer");sj_evt.fire("multiturnQuery",{query:i.value});l();return}n.Conversation.generateCopilotResponse(i.value,n.Helper.InputTypes.Text);o&&typeof sj_rra!="undefined"&&ht&&si();e&&n.AttachmentManager.clearAttachmentsData();l()}}function si(){var n=new URL(_d.URL);n.searchParams.set("turnindex","1");sj_rra(n.toString())}function hi(n){var i=_ge("sb_form_q"),r=_ge("sb_form"),t,u;!s&&i&&r?(i.value=n,t=_ge("sb_form_go"),t?t.click():r.submit()):(u=window.location.origin+"/search?q="+n+"&FORM=QBRE",window.open(u,s?"_blank":"_self"))}function ci(n){var i=window.location.origin+"/copilotsearch?q="+n+"&pq="+li()+"&FORM="+k,t;h&&(i+="&webcoms=1");vt?(t=_ge("b_bop_cs_inst"),t&&typeof si_ct=="function"?(t.href=i,t.target=s?"_blank":"_self",window.si_ct(t),t.click()):ni(i)):ni(i)}function ni(n){s||h?window.open(n,"_blank"):window.location.href=n}function li(){if(h)return yt;var t=new URLSearchParams(window.location.search),n=t.get("q");return n?n.trim():""}function ai(){f&&f.classList.add(n.Helper.hiddenClassName);u&&sj_evt.fire(rt);i.value!==""&&r.classList.remove(n.Helper.hiddenClassName)}function vi(){i.value===""&&(r.classList.add(n.Helper.hiddenClassName),e&&n.AttachmentManager.hasAttachment()||(f&&f.classList.remove(n.Helper.hiddenClassName),u&&sj_evt.fire(ti),d()))}function b(){var f=_G.RTL,n=_qs(".b_copilot_search",_d),t=_qs(".composer_container",_d),i=_qs(".composer_side_aligned",_d),r,u;n&&t&&(i?f?(r=_d.body.clientWidth-n.getBoundingClientRect().right,i.style.right="".concat(r,"px")):(u=n.getBoundingClientRect().left,i.style.left="".concat(u,"px")):(t.style.right="0px",t.style.left="0px"))}function yi(){Lib.CssClass.remove(o,n.Helper.hiddenClassName)}function tt(){Lib.CssClass.add(o,n.Helper.hiddenClassName)}function pi(){c&&y&&(Lib.CssClass.add(c,ut),b())}function wi(){c&&y&&(Lib.CssClass.remove(c,ut),b())}var i,it=/^\s*$/,rt="csComposerFocus",ti="csComposerBlur",ut="composer_side_aligned",f,r,o,a,c,ft="multiline",et,ot,e=!1,st=!1,ht=!1,u=!1,ct=!1,s=!1,lt=!1,k="",v=!1,at=!1,vt=!1,h=!1,yt="",y=!1,p=!1,pt=!1,wt=!1,bt=!1,kt=!1;t.initComposer=ii;t.getShouldDisableSubmit=ri;t.resetComposer=l;t.resetSubmitButtonStatus=ui;t.resetComposerLayoutDirection=d;t.focus=w;t.onUpdate=oi;t.resize=g;t.enterSearch=gt;t.onComposerSubmit=nt;t.showStopStreamingButton=yi;t.hideStopStreamingButton=tt;t.showSideAlignComposer=pi;t.hideSideAlignComposer=wi})(t=n.Composer||(n.Composer={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function e(){for(var n=0;n<i.length;n++)sj_ue(i[n],u,r[n]);i=[];r=[]}function o(t,f,o,s){var c,h,a;e();t.innerHTML="";var w=t,v=n.Helper.maxSuggestCount>0?Math.min(n.Helper.maxSuggestCount,f.length):f.length,y=[],l=_d.querySelector(".ca_turn:last-of-type .frame_cont "+n.turnContainerElementName),p=l===null||l===void 0?void 0:l.getAttribute("IG"),b=(c=s.scPosition)!==null&&c!==void 0?c:"Suggestion {0} of {1}",k=function(t){var s=f[t],e=_d.createElement("button"),a=_d.createElement("span"),h,k,c,l;a.textContent=s.suggestionText;h=t+1;k=s.suggestionText+" "+b.format((t+1).toString(),v.toString());e.setAttribute("aria-label",k);e.appendChild(a);e.classList.add("suggestion_chip");e.setAttribute("data-index",h.toString());n.Helper.GlobalInstTracker&&n.Helper.instTracker&&(c=n.Helper.instTracker.itemFactory.createInstrumentedItem({Name:"SuggestionChip",Text:s.suggestionText}),y.push(c),e.dataset.cspi=n.Helper.GlobalInstTracker.composeHValue(c),e.dataset.ig=p,e.dataset.clicks="true");i.push(e);l=function(){return o(s,h)};r.push(l);sj_be(e,u,l);w.appendChild(e)};for(h=0;h<v;h++)k(h);a=_qs(".suggestion_wrapper");n.Helper.GlobalInstTracker&&n.Helper.instTracker&&a&&(n.Helper.instTracker.dataSourceSerializer.serializeItemsToJson(y),n.Helper.instTracker.writeLayoutFromElement(a),n.Helper.instTracker.flushInstrumentation(p))}var i=[],r=[],f=String.prototype,u;f.format||(f.format=function(){var n=arguments;return this&&this.replace?this.replace(/{(\d+)}/g,function(t,i){return n&&typeof n[i]!="undefined"?n[i]:t}):""});u="click";t.layout=o})(t=n.ChipsLayout||(n.ChipsLayout={}))}(CopilotSearch||(CopilotSearch={}));__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})};__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},function(n){var t;(function(t){function ft(){return o}function et(){return s}function b(n){o=n}function k(n){s=n}function ot(n){a=n.retryIntervalMs;u=n.maxRetries;v=n.enableSCGenStatus;y=n.enableAppendClientipToFrame;it=n.enableForceAppendClientipToFrame;f=n.enableNewMultiTurnOverlayMode;e=n.interceptSerpSuggestionChipClicks;p=n.fromSerpComposer;rt=n.interceptScopeClicks;ut=n.mobileUI;o="";s=null;e&&sj_evt.bind("bopCompLoaded",at,!0);f&&typeof sj_evt!="undefined"&&sj_evt.bind("multiturn.resetchips",st,!0)}function st(){d()}function d(){r&&(r.classList.add(n.Helper.hiddenClassName),r.innerHTML="")}function g(t,r,f){var e,o;return r===void 0&&(r=""),f===void 0&&(f=0),__awaiter(this,void 0,void 0,function(){var k,l,p,s,c,w,b,h,d;return __generator(this,function(nt){switch(nt.label){case 0:if(f>=u)return console.error("Fetching suggestion chips data failed after max retries"),n.Conversation.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalAjaxReachMaxRetry),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiReachMaxRetry,"SHMode",i,"OvrIG",r),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{SHMode:i+"",Type:n.Helper.LogNames.SuggestionChipsApiReachMaxRetry},r),[2,Promise.resolve(undefined)];console.log("Fetching suggestion chips data, attempt: ",f+1);nt.label=1;case 1:return nt.trys.push([1,4,,6]),k={method:"POST",headers:{"Content-Type":"application/json"}},n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiSent,"OvrIG",r),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{retry:f+"",Type:n.Helper.LogNames.SuggestionChipsApiSent},r),l="".concat(n.Helper.suggestionChipsFetchApi,"?key=").concat(t),y&&new URL(_w.location.href).searchParams.forEach(function(n,t){["clientip"].includes(t)&&(l+="&".concat(t,"=").concat(n))}),[4,fetch(l,k)];case 2:if(p=nt.sent(),!p.ok)throw new Error("Network response was not ok");return[4,p.json()];case 3:if(s=nt.sent(),c=s===null||s===void 0?void 0:s.chips,w=(e=s===null||s===void 0?void 0:s.genStatus)===null||e===void 0?void 0:e.generationStatus,b=(o=s===null||s===void 0?void 0:s.genStatus)===null||o===void 0?void 0:o.generationStatusReason,h=n.Helper.GenerationStatusReason[b]!=undefined?n.Helper.GenerationStatusReason[b]:"Default",v&&w==n.Helper.ChipsGenerationStatus.Failure)return console.error("Generation Status is failure"),n.Conversation.emitcopilotSearchSCFetchStatus("Failure",h),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiFailure,"OvrIG",r,"GenStatusReason",h),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{GenStatusReason:h+"",retry:f+"",SHMode:i+"",Type:n.Helper.LogNames.SuggestionChipsApiFailure},r),[2,Promise.resolve(undefined)];if(f==u-1&&w==n.Helper.ChipsGenerationStatus.Failure&&(n.Conversation.emitcopilotSearchSCFetchStatus("Failure",h),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiFailure,"OvrIG",r,"GenStatusReason",h),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{GenStatusReason:h+"",retry:f+"",SHMode:i+"",Type:n.Helper.LogNames.SuggestionChipsApiFailure},r)),!Array.isArray(c)||c.length===0){n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiEmptyResponse,"OvrIG",r);n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{retry:f+"",Type:n.Helper.LogNames.SuggestionChipsApiEmptyResponse},r);throw new Error("No chips received");}return n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiSuccess,"OvrIG",r),n.Conversation.emitcopilotSearchSCFetchRetry(f),n.Helper.writeLog(n.Helper.ClientInst.Perf,n.Helper.LogNames.SuggestionChipsRetryNum,"retry",f+"","OvrIG",r),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{retry:f+"",SHMode:i+"",Type:n.Helper.LogNames.SuggestionChipsApiSuccess},r),[2,c];case 4:return d=nt.sent(),[4,new Promise(function(n){return setTimeout(n,a)})];case 5:return nt.sent(),console.log("Try fetching suggestion chips data again: ",+new Date),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.SuggestionChipsApiError,"OvrIG",r),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{retry:f+"",Type:n.Helper.LogNames.SuggestionChipsApiError},r),[2,g(t,r,f+1)];case 6:return[2]}})})}function ht(t,r){return r===void 0&&(r=""),__awaiter(this,void 0,void 0,function(){var u,f;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),n.Conversation.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalAjaxSentImpression),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.TotalSuggestionChipsApiReq,"SHMode",i,"OvrIG",r),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{SHMode:i+"",Type:n.Helper.LogNames.TotalSuggestionChipsApiReq},r),[4,g(t,r,0)];case 1:return(u=e.sent(),u)?[2,u]:[2,l?c:undefined];case 2:return(f=e.sent(),console.log("Error fetching suggestion chips data: ",f),l)?[2,c]:[2];case 3:return[2]}})})}function nt(t,i,u){k(i);b(t);var f=i.map(function(n){return n.fullFormedQuery}),e=f.join(" | "),o=n.Helper.getResponseId();n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.SuggestionChipRender,"CSearch",{NumChips:i.length.toString(),Titles:e,ResponseId:o},u);typeof Log!="undefined"&&typeof Log.LogFilterFlare!="undefined"&&Log.LogFilterFlare(["00csscux00"]);n.ChipsLayout.layout(r,i,tt,n.Helper.locStrings);n.Conversation.emitScFetchMdmEvent(n.Helper.SuggestionchipMdmFetchType.TotalSCRendered)}function ct(t,i,r){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(f){switch(f.label){case 0:return console.log("suggestionChipsId: ",t),[4,ht(t,i)];case 1:return(u=f.sent(),!u)?(console.log("No suggestion chips data received, use the last turn chips"),n.changeMode(n.Helper.CopilotMode.Float),[2,!1]):(r()&&(nt(t,u,i),Log===null||Log===void 0?void 0:Log.Log("SuggestionChipRendered","SCRender","ChipId: "+t,!1,"OvrIG",i),n.Helper.logCustomData(n.Helper.ClientInst.SystemEvent,n.Helper.LogNames.SuggestionChipEvent,"CSearch",{Event:"SCRender",ChipId:t+""},i)),[2,!0])}})})}function lt(){var i=sj_ce("span",undefined,"icon"),n=_d.createElementNS(h,"svg"),t;return n.setAttribute("width","18"),n.setAttribute("height","16"),n.setAttribute("viewBox","0 0 18 16"),n.setAttribute("fill","none"),t=_d.createElementNS(h,"path"),t.setAttribute("d","M4.92704 0.5H11.1392C12.1927 0.5 13.1203 1.19397 13.4176 2.2046L13.8868 3.79901C14.0476 4.34546 14.5266 4.732 15.086 4.78068H15.3751C16.2627 4.78068 16.9479 5.03232 17.4023 5.54832C17.8449 6.05084 17.9913 6.71838 18.0009 7.38707C18.02 8.70801 17.5033 10.349 17.0916 11.6554C16.7333 12.7924 16.273 13.9729 15.6552 14.8777C15.0399 15.7788 14.1999 16.5006 13.073 16.5006H6.87484L6.86695 16.5005H6.86063C5.80716 16.5005 4.87959 15.8066 4.58222 14.796L4.11309 13.2015C3.95237 12.6553 3.47368 12.2689 2.91456 12.2199H2.62488C1.73727 12.2199 1.05209 11.9683 0.59766 11.4523C0.155088 10.9498 0.00871752 10.2822 -0.000950593 9.61354C-0.0200489 8.2926 0.49665 6.65165 0.908378 5.34517C1.26667 4.20826 1.72694 3.02772 2.34477 2.12288C2.96005 1.22178 3.80007 0.5 4.92704 0.5ZM1.86214 5.64574C1.43465 7.00224 0.982671 8.47352 0.998945 9.59908C1.00696 10.1536 1.12929 10.5429 1.34812 10.7914C1.55509 11.0264 1.924 11.2199 2.62488 11.2199H5.25213C5.8614 11.2199 6.39814 10.8195 6.57212 10.2352C7.04172 8.65798 7.83794 5.9963 8.46637 3.95934L8.49937 3.85233C8.64852 3.36841 8.79284 2.90016 8.94826 2.48475C9.08066 2.13087 9.22885 1.79335 9.40955 1.5H4.92704C4.28311 1.5 3.70642 1.90208 3.17062 2.68678C2.63737 3.46774 2.2122 4.53493 1.86214 5.64574ZM4.73445 12.2199C4.88192 12.4288 4.99729 12.6639 5.07243 12.9193L5.54156 14.5137C5.71371 15.0988 6.25073 15.5005 6.86063 15.5005H6.88678C7.24574 15.4969 7.48955 15.3275 7.64066 15.1226C7.80779 14.8959 7.96035 14.5792 8.11514 14.1654C8.25974 13.7789 8.39567 13.3381 8.5478 12.8446L8.57806 12.7465C8.64307 12.5357 8.70989 12.3183 8.77797 12.096C8.543 12.1733 8.29325 12.2147 8.03611 12.2147H5.41074C5.35823 12.2182 5.30534 12.2199 5.25213 12.2199H4.73445ZM7.1935 11.2147H8.03611C8.58916 11.2147 9.08319 10.8842 9.29856 10.3846C9.7359 8.93867 10.1692 7.48844 10.4694 6.48005C10.5449 6.22668 10.6599 5.9933 10.8065 5.78588H9.96376C9.41111 5.78588 8.91739 6.11592 8.70178 6.61487C8.26432 8.06118 7.83086 9.5119 7.53054 10.5206C7.45511 10.7739 7.34011 11.0073 7.1935 11.2147ZM9.22206 4.90449C9.45698 4.82723 9.70667 4.78588 9.96376 4.78588H12.5902C12.6424 4.78243 12.695 4.78068 12.7479 4.78068H13.2655C13.118 4.57183 13.0026 4.33666 12.9274 4.08128L12.4583 2.48687C12.2862 1.90177 11.7491 1.5 11.1392 1.5H11.1244C10.7593 1.50023 10.512 1.67099 10.3593 1.87803C10.1922 2.10467 10.0396 2.42146 9.88485 2.83517C9.74025 3.22167 9.60432 3.66256 9.45219 4.15601L9.42193 4.25415C9.35693 4.46483 9.29012 4.68225 9.22206 4.90449ZM16.1379 11.3549C16.5653 9.99837 17.0173 8.52709 17.001 7.40153C16.993 6.84698 16.8707 6.45771 16.6519 6.20923C16.4449 5.97423 16.076 5.78068 15.3751 5.78068H12.7479C12.1386 5.78068 11.6018 6.18108 11.4279 6.76541C10.9583 8.34263 10.1621 11.0043 9.53362 13.0413L9.50062 13.1483C9.35147 13.6322 9.20715 14.1005 9.05173 14.5159C8.91933 14.8697 8.77114 15.2073 8.59044 15.5006H13.073C13.7169 15.5006 14.2936 15.0985 14.8294 14.3138C15.3626 13.5329 15.7878 12.4657 16.1379 11.3549Z"),n.appendChild(t),i.appendChild(n),i}function tt(t,i,r){if(r===void 0&&(r=!0),console.log("Chip clicked: ".concat(t.suggestionText)),p&&e&&n.Helper.getLastTurnId()==null&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",n.Helper.getConversationId()),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.ConversationStart)),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart),n.Helper.writeLog(n.Helper.ClientInst.Click,n.Helper.LogNames.QueryIssued,"inputType",n.Helper.InputTypes.SuggestionChip,"query",t.fullFormedQuery,"displayedQuery",t.suggestionText),r&&n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.SuggestionChipClick,"CSearch",{Position:i.toString(),Title:t.fullFormedQuery,ResponseId:n.Helper.getResponseId()},""),f&&typeof sj_evt!="undefined"&&typeof _w._bingMultiTurnEmitter!="undefined"){n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"MultiTurnOverlayTriggered","query",t.fullFormedQuery,"inputType","SuggestionChip");sj_evt.fire("multiturnQuery",{query:t.fullFormedQuery});return}n.Conversation.generateCopilotResponse(t.fullFormedQuery,n.Helper.InputTypes.SuggestionChip,t.suggestionText)}function at(){var n=_d.querySelectorAll(".suggestion_chip, .sc_item");n&&n.forEach(function(n){sj_be(n,"click",vt)})}function vt(t){var i,r,u,f,e,o;return(t=sj_ev(t),i=t.target,!i)?!0:(r=i.closest("a"),!r)?!0:(u=r.getAttribute("data-query"),f=i.innerText||i.textContent,!u)?!0:(e={suggestionText:f,fullFormedQuery:u},o=Number(r.dataset.index),sj_sp(t),sj_pd(t),tt(e,o,!1),n.Composer.resetComposer(),!1)}var c=[{suggestionText:"Tom Hanks",fullFormedQuery:"Tom Hanks"},{suggestionText:"Clam digging safety tips in Florida",fullFormedQuery:"Clam digging safety tips in Florida"},{suggestionText:"which universal park is best",fullFormedQuery:"which universal park is best"}],l=n.Helper.getValueFromUrl("useMockChips")==="1"?!0:!1,r=_qs(".suggestion_wrapper"),a=200,u=5,v=!1,y=!1,it=!1,f=!1,p=!1,rt=!1,ut=!1,e=!1,w=n.Helper.getValueFromUrl("shm"),i=w==="cr"?"CacheReuse":w==="co"?"CacheOnly":"Unknown",o="",s=null,h;t.getSuggestionChipId=ft;t.getSuggestionChips=et;t.setSuggestionChipId=b;t.setSuggestionChips=k;t.init=ot;t.resetChips=d;t.renderSuggestionChips=nt;t.updateSuggestionChips=ct;h="http://www.w3.org/2000/svg";t.newSpan=lt})(t=n.SuggestionChips||(n.SuggestionChips={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function l(n){var t,h;(e=_d.querySelector(".b_copilot_search"),e)&&(r=_d.querySelector(".copilot_zero_input"),r)&&(u=_d.querySelector(".b_cs_canvas"),u)&&(n.showZeroInputPage&&(i=!0),o=(t=n.enableZeroInputRemoval)!==null&&t!==void 0?t:!1,f=(h=n.enableSideAlignedComposer)!==null&&h!==void 0?h:!1,typeof _w.Log!="undefined"&&typeof Log.LogFilterFlare!="undefined"&&Log.LogFilterFlare(["cszeroinputpage"]),sj_evt.bind("csScopeClk",function(){s()}),sj_evt.bind("cszipclk",function(){var n=_d.querySelectorAll(".cs_zip_element");n.forEach(function(n){var t=n.querySelector(".cs_zip_answer_caption_text"),r="",i="",u,f;t&&(r=t.getAttribute("data-ziprq"),u=t.getAttribute("data-optdoc"),f=t.getAttribute("data-optdocv"),u&&(i+='OptDocId:"'+encodeURIComponent(u)+'"',f&&(i+='+OptDocVersion:"'+encodeURIComponent(f)+'"')));sj_be(n,"click",function(){c(r,i)});sj_be(n,"keypress",function(n){n.shiftKey||n.key!=="Enter"||(n.preventDefault(),c(r,i))})})}),sj_evt.fire("cszipfetch",n))}function s(){var t,e,o,s;i||(i=!0,typeof _w.Log!="undefined"&&typeof Log.LogFilterFlare!="undefined"&&Log.LogFilterFlare(["cszeroinputpage"]),Lib.CssClass.add(u,n.Helper.hiddenClassName),Lib.CssClass.remove(r,n.Helper.hiddenClassName),n.Composer.resetComposer(),(t=n.SuggestionChips)===null||t===void 0?void 0:t.resetChips(),n.Conversation.resetConversation(!0),(e=n.Composer)===null||e===void 0?void 0:e.resetSubmitButtonStatus(),(o=n.ComposerMenu)===null||o===void 0?void 0:o.hideMenu(),f&&((s=n.Composer)===null||s===void 0?void 0:s.hideSideAlignComposer()),_w.scrollTo&&_w.scrollTo(0,0),a(),n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ZeroInputPageLoaded))}function h(){var t;i&&(i=!1,Lib.CssClass.add(r,n.Helper.hiddenClassName),Lib.CssClass.remove(u,n.Helper.hiddenClassName),(t=n.ComposerMenu)===null||t===void 0?void 0:t.showMenu(),f&&n.Composer.showSideAlignComposer())}function a(){var n=new URL(window.location.href),t=n.searchParams;t.set("q","");n.search=t.toString();window.history.replaceState({},"",n.toString());o&&(window.location.href=n.toString())}function c(t,i){h();n.changeMode(n.Helper.CopilotMode.Turn);n.Conversation.generateCopilotResponse(t,n.Helper.InputTypes.Zero,"",i);n.Composer.resetComposer();n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart);n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.ZeroInputCardClicked);n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.DiscoverCardClicked,"CSearch",{Query:t},"")}var r,u,e,i=!1,f=!1,o=!1;t.init=l;t.show=s;t.hide=h})(t=n.ZeroPage||(n.ZeroPage={}))}(CopilotSearch||(CopilotSearch={})),function(n){function e(n){f=n.enableSERPChat?".err_cont":"#b_copilot_search .err_cont"}function o(n,f,e){r?(i&&(sj_ue(t,"click",i),i=undefined),sj_be(t,"click",e),i=e,u.textContent=f.msg,t.textContent=f.action):s(e,f)}function s(n,e){var s;i=n;r=_qs(f);var h="http://www.w3.org/2000/svg",c=sj_ce("span",undefined,"icon"),o=_d.createElementNS(h,"svg");o.setAttribute("width","16");o.setAttribute("height","16");o.setAttribute("viewBox","0 0 16 16");o.setAttribute("fill","none");s=_d.createElementNS(h,"path");s.setAttribute("d","M9.09184 2.76331C8.61488 1.90972 7.38669 1.9096 6.90956 2.76309L2.15682 11.2648C1.69103 12.098 2.29333 13.1247 3.2479 13.1247H12.7512C13.7056 13.1247 14.3079 12.0982 13.8424 11.265L9.09184 2.76331ZM8.75 10.375C8.75 10.7892 8.41421 11.125 8 11.125C7.58579 11.125 7.25 10.7892 7.25 10.375C7.25 9.96079 7.58579 9.625 8 9.625C8.41421 9.625 8.75 9.96079 8.75 10.375ZM7.5 8.125V5.625C7.5 5.34886 7.72386 5.125 8 5.125C8.27614 5.125 8.5 5.34886 8.5 5.625V8.125C8.5 8.40114 8.27614 8.625 8 8.625C7.72386 8.625 7.5 8.40114 7.5 8.125Z");o.appendChild(s);c.appendChild(o);r.appendChild(c);u=_d.createElement("div");u.textContent=e.msg;u.classList.add("error_text");r.appendChild(u);t=_d.createElement("span");t.classList.add("action_button");t.textContent=e.action;r.appendChild(t);sj_be(t,"click",i)}var r,t,u,f="",i;n.ErrorUI={updateView:o,init:e}}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function w(t){h=t.enableNoResultRetryBtn;l=t.disableAutoHorizontalScrollAnswer;a=t.enableStopStreamMsgInTurn;o=t.enableSERPChat?".err_cont":"#b_copilot_search .err_cont";y=t.enableSERPChat?"SERP":"CopilotSearchHeader";h&&(c.search_no_results=s.retry);nt(t.locStrings);n.ErrorUI.init(t)}function b(){var n=c[e]||c[i.UNKNOWN];n();p()}function k(t,r){var o,s,h;e=t||i.UNKNOWN;v=r||"";a&&t==i.STREAMSTOPPED?(o=_qs(".ca_turn[turnid='"+n.Helper.getLastTurnId()+"']"),s=_qs(".err_turn_cont",o),s||(h=n.ErrorUI.generateInTurnView(e,{msg:u[e],action:f[e]}),o.appendChild(h))):(n.ErrorUI.updateView(e,{msg:u[e],action:f[e]},b),g())}function d(t,i){k(t,i);n.Composer.onUpdate(n.Helper.CopilotSearchState.Error)}function p(){var t=_qs(o);t&&!Lib.CssClass.contains(t,n.Helper.hiddenClassName)&&t.classList.add(n.Helper.hiddenClassName)}function g(){var t=_qs(o),i;t&&Lib.CssClass.contains(t,n.Helper.hiddenClassName)&&(Lib.CssClass.remove(t,n.Helper.hiddenClassName),it(),i=n.Helper.getResponseId(),n.Helper.writeOverrideLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.Error,v,"ErrorType",e,"ResponseId",i,"Shell",y.toString()))}function nt(n){Object.values(i).forEach(function(t){switch(t){case i.ERROR_OCCURRED:u[t]=n.errorOccurred;f[t]="";break;case i.LIMIT_REACHED:u[t]=n.searchLimitReached;f[t]="";break;case i.SEARCH_FAILED:u[t]=n.searchFailed;f[t]=n.retryButtonText;break;case i.SEARCH_NO_RESULTS:u[t]=n.searchNoResult;f[t]=h?n.retryButtonText:"";break;case i.SEARCH_TIMEOUT_FALLBACK:case i.SEARCH_TIMEOUT:u[t]=n.searchCanceled;f[t]=n.retryButtonText;break;case i.SUGGESTION_KEY_RESULT_LOAD_FAILED:u[t]=n.suggestionKeyResultLoadFailedText;f[t]="";break;case i.CS_ANSWER_SUGGESTION_KEY_TIMEOUT:u[t]=n.errorOccurred;f[t]="";break;case i.OFFENSIVE:u[t]=n.offensiveSearchText;f[t]="";break;case i.UNAUTHORIZED:u[t]=n.unauthorizedSearchText;f[t]="";break;case i.STREAMSTOPPED:u[t]=n.streamStoppedText;f[t]="";break;case i.UNKNOWN:default:u[t]="";f[t]=""}})}function tt(n){switch(n.ErrorMsg){case"Throttled":return i.LIMIT_REACHED;case"Unauthorized":return i.UNAUTHORIZED;case"Offensive":return i.OFFENSIVE;case"Default":default:return i.SEARCH_FAILED}}function it(){var n=_qs(o),t;n&&(l?(t=n.getBoundingClientRect(),window.scrollTo({top:window.scrollY+t.top,behavior:"smooth"})):n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}var r,i;(function(n){n.ERROR_OCCURRED="error_occurred";n.LIMIT_REACHED="limit_reached";n.SEARCH_FAILED="search_failed";n.SEARCH_TIMEOUT="search_timeout";n.SEARCH_TIMEOUT_FALLBACK="search_timeout_fallback";n.SEARCH_NO_RESULTS="search_no_results";n.SUGGESTION_KEY_RESULT_LOAD_FAILED="suggestion_key_result_load_failed";n.CS_ANSWER_SUGGESTION_KEY_TIMEOUT="cs_answer_suggestion_key_timeout";n.UNKNOWN="unknown";n.OFFENSIVE="offensive";n.UNAUTHORIZED="unauthorized";n.STREAMSTOPPED="stream_stopped"})(i=t.ErrorType||(t.ErrorType={}));var e=i.UNKNOWN,h=!1,l=!1,a=!1,v="",o="",y="",u={},f={},s={retry:n.Conversation.retryLastTurn,restart:n.Conversation.retryLastTurn,refresh:function(){}},c=(r={},r[i.CS_ANSWER_SUGGESTION_KEY_TIMEOUT]=function(){},r[i.ERROR_OCCURRED]=function(){},r[i.LIMIT_REACHED]=function(){},r[i.SEARCH_FAILED]=s.retry,r[i.SEARCH_TIMEOUT]=s.retry,r[i.SEARCH_TIMEOUT_FALLBACK]=s.retry,r[i.SEARCH_NO_RESULTS]=function(){},r[i.SUGGESTION_KEY_RESULT_LOAD_FAILED]=function(){},r[i.UNKNOWN]=function(){},r[i.OFFENSIVE]=function(){},r[i.UNAUTHORIZED]=function(){},r[i.STREAMSTOPPED]=function(){},r);t.init=w;t.errorHandler=d;t.hideErrorState=p;t.handleIframeErrors=tt})(t=n.ErrorState||(n.ErrorState={}))}(CopilotSearch||(CopilotSearch={})),function(n){function et(n,t,i){v=n.ovlLinks;y=n.ovlSources;p=n.ovlSearchSite;w=n.ovrCloseButtonText;r=t;b=i;ht()}function ot(t){var o,s=t&&t.iframeid&&t.frags&&t.frags.length>0,r,i,c,h,e;(g=t&&t.iframeid,f=t&&n.Helper.getImpressionId(t),s)&&(t.frags.forEach(function(n){n.type&&n.content&&n.content.length>0||(s=!1)}),s)&&(r=st(t.iframeid),r)&&(l.innerText=r,u.href="https://www.bing.com/search?q=".concat(encodeURIComponent(r)),i=_qs(".overlay-cont"),c=_qs(".overlay-dimmer"),i.classList.remove("b_hide"),c.classList.remove("b_hide"),h=i.hasAttribute("data-focused"),h||((o=_qs(".overlay-content"))===null||o===void 0?void 0:o.remove()),ct(t),nt(),i.classList.remove("slide-out"),i.classList.add("slide-in"),document.documentElement.style.overflow="hidden",h||(i.focus(),i.setAttribute("data-focused","true"),e=n.Helper,e.writeOverrideLog(e.ClientInst.CopilotInteraction,e.LogNames.OverlayPopup,f)))}function st(n){var t,r=_d.getElementById(n),i;return r?(i=(t=r.parentElement)===null||t===void 0?void 0:t.querySelector(".ca_userquery_text"),i?i.innerText:null):null}function nt(){var n=_qs(".overlay-cont");n&&(n.style.height=window.innerWidth>730?"calc(100vh - 72px)":"80vh")}function ht(){var e,f,r,o,n;t=sj_ce("div",undefined,"overlay-cont");t.classList.add("b_hide");t.setAttribute("tabindex","-1");sj_be(t,"animationend",bt);sj_be(t,"keydown",dt);e=sj_ce("div",undefined,"overlay-scroller");t.appendChild(e);f=sj_ce("div",undefined,"overlay-dimmer");sj_be(f,"click",h);f.classList.add("b_hide");document.body.appendChild(f);r=sj_ce("div",undefined,"overlay-header");i=sj_ce("div",undefined,"overlay-bar");r.appendChild(i);u=sj_ce("a",undefined,"header-content-container");u.target="_blank";u.setAttribute("tabindex","0");o=sj_ce("div",undefined,"header-search");o.appendChild(vt());var s=sj_ce("div",undefined,"header-content"),c=sj_ce("h3",undefined,"header-title"),a=sj_ce("p",undefined,"header-subtitle");a.textContent=p;s.appendChild(c);s.appendChild(a);l=c;n=sj_ce("div",undefined,"overlay-close-btn");n.appendChild(lt());n.setAttribute("tabindex","0");n.setAttribute("role","button");n.setAttribute("aria-label",w);sj_be(n,"click",h);sj_be(n,"keydown",wt);u.appendChild(o);u.appendChild(s);r.appendChild(u);r.appendChild(n);e.appendChild(r);_qs(".b_copilot_search").appendChild(t);rt();sj_be(window,"resize",rt)}function ct(n){var e=_qs(".overlay-content"),t,i,o,h,u,f,l;if(e||(e=sj_ce("div",undefined,"overlay-content"),_qs(".overlay-scroller").appendChild(e)),t=[],i=[],n.frags.forEach(function(n){n.type==="Sources"?t=t.concat(n.content):n.type==="WebResults"&&(i=i.concat(n.content))}),t=t.slice(0,r),i=i.slice(0,r),o=!1,h=!1,n.initType&&(n.initType==="Sources"?(o=!0,h=!1):n.initType==="WebResults"&&(o=!1,h=!0)),u=_qs(".overlay-content .sources-section"),f=_qs(".overlay-content .webresults-section"),!u&&t.length>0)u=tt(y,s(t,"Sources"),yt(),o),u.classList.add("sources-section"),e.insertBefore(u,e.firstChild);else if(u&&t.length>0){var a=u.querySelector(".section-content"),p=a.querySelectorAll(".section-item"),c=p.length;c<r&&(l=s(t.slice(0,r-c),"Sources"),l.forEach(function(n){a.appendChild(n)}))}if(!f&&i.length>0)f=tt(v,s(i,"WebResults"),pt(),h),f.classList.add("webresults-section"),e.appendChild(f);else if(f&&i.length>0){var w=f.querySelector(".section-content"),p=w.querySelectorAll(".section-item"),c=p.length;c<r&&(l=s(i.slice(0,r-c),"WebResults"),l.forEach(function(n){w.appendChild(n)}))}}function tt(n,t,i,r){var s,u,h,c,l,o,a,f,e;return r===void 0&&(r=!1),s=sj_ce("div",undefined,"collapsible-section"),u=sj_ce("span",undefined,"section-title-container"),u.setAttribute("tabindex","0"),u.setAttribute("role","button"),u.setAttribute("aria-expanded",r.toString()),u.setAttribute("aria-haspopup","true"),h=sj_ce("span",undefined,"section-title"),c=sj_ce("span",undefined,"section-title-icon"),c.appendChild(i),h.appendChild(c),l=sj_ce("span",undefined,"section-title-text"),l.textContent=n,h.appendChild(l),o=sj_ce("span",undefined,"arrow-icon"),a=at(),o.appendChild(a),u.appendChild(h),u.appendChild(o),f=sj_ce("span","section-content","section-content"),f.setAttribute("role","menu"),f.classList.toggle("b_hide",!r),o.classList.toggle("open",r),t.forEach(function(n){f.appendChild(n)}),e=r,u.addEventListener("click",function(){e=!e;f.classList.toggle("b_hide",!e);o.classList.toggle("open",e);u.setAttribute("aria-expanded",e.toString())}),s.appendChild(u),s.appendChild(f),s}function s(t,i){var r=[];return t.forEach(function(t){var u=sj_ce("a",undefined,"section-item"),s=sj_ce("div",undefined,"section-item-text"),h,c,v,y,p,o,l;u.href=t.href;u.target="_blank";u.setAttribute("role","menuitem");var a=sj_ce("div",undefined,"top-row"),w=sj_ce("div",undefined,"bottom-row"),e=sj_ce("a",undefined,"site-bubble");e.href=t.href;e.target="_blank";t.favIcon&&(h=sj_ce("img",undefined,"favicon"),h.src=t.favIcon,h.setAttribute("role","presentation"),e.appendChild(h));c=sj_ce("span",undefined,"site-text");c.textContent=t.site!=null?t.site:c.textContent=t.displayURL.replace(/^https?:\/\//,"").split(/[ /]/)[0];e.appendChild(c);s.appendChild(e);v=sj_ce("span",undefined,"item-link");v.textContent=t.displayURL;w.appendChild(v);y=sj_ce("span",undefined,"item-title");y.textContent=t.title;s.appendChild(y);b&&(p=sj_ce("div",undefined,"item-snippet"),p.textContent=t.snip,s.appendChild(p));a.appendChild(s);t.image&&(o=sj_ce("a",undefined,"site-image"),o.href=t.href,o.target="_blank",l=sj_ce("img",undefined,"item-image"),l.src=t.image,l.setAttribute("role","presentation"),o.appendChild(l),a.appendChild(o));u.appendChild(a);u.appendChild(w);sj_be(u,"click",function(){var r=n.Helper;r.writeOverrideLog(r.ClientInst.CopilotInteraction,i=="Sources"?r.LogNames.OverlayCitationClick:r.LogNames.OverlayLinkClick,f);n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,i=="Sources"?r.LogNames.OverlayCitationClick:r.LogNames.OverlayLinkClick,"CSearch",{Title:t.title,Url:t.href,ResponseId:n.Helper.getResponseId()},f)});r.push(u)}),r}function lt(){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg"),t;return n.setAttribute("width","16"),n.setAttribute("height","16"),n.setAttribute("viewBox","0 0 16 16"),n.setAttribute("fill","none"),t=document.createElementNS(i,"path"),t.setAttribute("d","M1.89705 2.05379L1.96967 1.96967C2.23594 1.7034 2.6526 1.6792 2.94621 1.89705L3.03033 1.96967L8 6.939L12.9697 1.96967C13.2359 1.7034 13.6526 1.6792 13.9462 1.89705L14.0303 1.96967C14.2966 2.23594 14.3208 2.6526 14.1029 2.94621L14.0303 3.03033L9.061 8L14.0303 12.9697C14.2966 13.2359 14.3208 13.6526 14.1029 13.9462L14.0303 14.0303C13.7641 14.2966 13.3474 14.3208 13.0538 14.1029L12.9697 14.0303L8 9.061L3.03033 14.0303C2.76406 14.2966 2.3474 14.3208 2.05379 14.1029L1.96967 14.0303C1.7034 13.7641 1.6792 13.3474 1.89705 13.0538L1.96967 12.9697L6.939 8L1.96967 3.03033C1.7034 2.76406 1.6792 2.3474 1.89705 2.05379L1.96967 1.96967L1.89705 2.05379Z"),t.setAttribute("fill","currentColor"),n.appendChild(t),n}function at(){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg"),t;return n.setAttribute("width","24"),n.setAttribute("height","24"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("fill","none"),t=document.createElementNS(i,"path"),t.setAttribute("d","M4.21967 8.46967C4.51256 8.17678 4.98744 8.17678 5.28033 8.46967L12 15.1893L18.7197 8.46967C19.0126 8.17678 19.4874 8.17678 19.7803 8.46967C20.0732 8.76256 20.0732 9.23744 19.7803 9.53033L12.5303 16.7803C12.2374 17.0732 11.7626 17.0732 11.4697 16.7803L4.21967 9.53033C3.92678 9.23744 3.92678 8.76256 4.21967 8.46967Z"),n.appendChild(t),n}function vt(){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg"),t;return n.setAttribute("width","20"),n.setAttribute("height","20"),n.setAttribute("viewBox","0 0 20 20"),n.setAttribute("fill","none"),t=document.createElementNS(i,"path"),t.setAttribute("d","M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z"),n.appendChild(t),n}function yt(){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg"),t;return n.setAttribute("width","12"),n.setAttribute("height","16"),n.setAttribute("viewBox","0 0 12 16"),n.setAttribute("fill","none"),t=document.createElementNS(i,"path"),t.setAttribute("d","M2 3C2 2.44772 2.44772 2 3 2H9C9.55228 2 10 2.44772 10 3V4C10 4.55228 9.55228 5 9 5H3C2.44772 5 2 4.55228 2 4V3ZM3 3V4H9V3H3ZM0 2V14C0 15.1046 0.89543 16 2 16H11.5C11.7761 16 12 15.7761 12 15.5C12 15.2239 11.7761 15 11.5 15H2C1.44772 15 1 14.5523 1 14H11C11.5523 14 12 13.5523 12 13V2C12 0.895431 11.1046 0 10 0H2C0.895431 0 0 0.89543 0 2ZM10 1C10.5523 1 11 1.44772 11 2V13H1V2C1 1.44772 1.44772 1 2 1H10Z"),n.appendChild(t),n}function pt(){var i="http://www.w3.org/2000/svg",n=document.createElementNS(i,"svg"),t;return n.setAttribute("width","16"),n.setAttribute("height","16"),n.setAttribute("viewBox","0 0 16 16"),n.setAttribute("fill","none"),t=document.createElementNS(i,"path"),t.setAttribute("d","M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM8 1C8.65685 1 9.40677 1.59025 10.0218 2.90814C10.2393 3.37419 10.4283 3.90978 10.5806 4.5H5.41936C5.57172 3.90978 5.76073 3.37419 5.97822 2.90814C6.59323 1.59025 7.34315 1 8 1ZM5.07203 2.48526C4.79564 3.07753 4.56498 3.75696 4.38931 4.5H1.93648C2.77295 3.05399 4.11182 1.93497 5.71442 1.38163C5.47297 1.71222 5.25828 2.08617 5.07203 2.48526ZM4.19265 5.5C4.06723 6.28832 4 7.12934 4 8C4 8.87066 4.06723 9.71168 4.19265 10.5H1.45963C1.16268 9.7236 1 8.8808 1 8C1 7.1192 1.16268 6.2764 1.45963 5.5H4.19265ZM4.38931 11.5C4.56498 12.243 4.79564 12.9225 5.07203 13.5147C5.25828 13.9138 5.47297 14.2878 5.71442 14.6184C4.11182 14.065 2.77295 12.946 1.93648 11.5H4.38931ZM5.41936 11.5H10.5806C10.4283 12.0902 10.2393 12.6258 10.0218 13.0919C9.40677 14.4097 8.65685 15 8 15C7.34315 15 6.59323 14.4097 5.97822 13.0919C5.76073 12.6258 5.57172 12.0902 5.41936 11.5ZM10.7938 10.5H5.20617C5.07345 9.72528 5 8.88331 5 8C5 7.11669 5.07345 6.27472 5.20617 5.5H10.7938C10.9266 6.27472 11 7.11669 11 8C11 8.88331 10.9266 9.72528 10.7938 10.5ZM11.6107 11.5H14.0635C13.2271 12.946 11.8882 14.065 10.2856 14.6184C10.527 14.2878 10.7417 13.9138 10.928 13.5147C11.2044 12.9225 11.435 12.243 11.6107 11.5ZM14.5404 10.5H11.8074C11.9328 9.71168 12 8.87066 12 8C12 7.12934 11.9328 6.28832 11.8074 5.5H14.5404C14.8373 6.2764 15 7.1192 15 8C15 8.8808 14.8373 9.7236 14.5404 10.5ZM10.2856 1.38163C11.8882 1.93497 13.2271 3.05399 14.0635 4.5H11.6107C11.435 3.75696 11.2044 3.07753 10.928 2.48526C10.7417 2.08617 10.527 1.71222 10.2856 1.38163Z"),n.appendChild(t),n}function h(){var r=_qs(".overlay-dimmer"),i;t&&(t.classList.remove("slide-in"),t.classList.add("slide-out"),t.removeAttribute("data-focused"));r&&r.classList.add("b_hide");document.documentElement.style.overflow="";i=n.Helper;i.writeOverrideLog(i.ClientInst.CopilotInteraction,i.LogNames.OverlayDimiss,f)}function it(t){t.preventDefault();h();var i=_qs("#".concat(g," iframe")),r=n.Helper.getIframeInternalElement(i,"#copans_container .b_buttons_container .b_ts_all_links_header");r&&requestAnimationFrame(function(){i.focus();r.focus()})}function wt(n){(n.key==="Enter"||n.key===" ")&&it(n)}function bt(n){var i,r;["slideOut","slideOutRtl","slideOutSmallScreen"].includes(n.animationName)&&((i=_qs(".overlay-content"))===null||i===void 0?void 0:i.remove(),l.innerText="",r=_qs(".overlay-scroller"),r&&(r.scrollTop=0),t===null||t===void 0?void 0:t.classList.add("b_hide"))}function rt(){var t=_qs(".overlay-cont"),r=_qs(".overlay-dimmer"),n;t&&i&&r&&(nt(),n=window.innerWidth<=730,n&&!e?(sj_be(i,"pointerdown",ut),sj_be(i,"pointermove",ft),sj_be(i,"pointerup",c),sj_be(i,"pointercancel",c),e=!0):!n&&e&&(sj_ue(i,"pointerdown",ut),sj_ue(i,"pointermove",ft),sj_ue(i,"pointerup",c),sj_ue(i,"pointercancel",c),e=!1))}function ut(n){o=!0;k=n.clientY;d=t.offsetHeight;a=!1;i.setPointerCapture(n.pointerId)}function ft(n){var r,i;o&&(r=n.clientY-k,r>0&&(a=!0,i=d-r,i=Math.max(i,0),t.style.height="".concat(i,"px")))}function c(n){o&&(o=!1,i.releasePointerCapture(n.pointerId),a&&h())}function kt(n){while(n){var t=window.getComputedStyle(n);if(t.display==="none"||t.visibility==="hidden")return!1;n=n.parentElement}return!0}function dt(n){var a=t.querySelectorAll('a, [tabindex]:not([tabindex="-1"])'),i=Array.from(a).filter(function(n){return kt(n)&&!n.hasAttribute("disabled")}),o=i[0],s=i[i.length-1],u=Array.from(i),v=document.activeElement,r=u.indexOf(v),h,c,f,l,e;switch(n.key){case"Tab":n.shiftKey?document.activeElement===o&&(n.preventDefault(),s.focus()):document.activeElement===s&&(n.preventDefault(),o.focus());break;case"Escape":it(n);break;case"Enter":case" ":n.preventDefault();h=n.target;h.click();break;case"ArrowRight":case"ArrowDown":c=r+1>=u.length?0:r+1;f=i[c];f&&f.focus();n.preventDefault();break;case"ArrowLeft":case"ArrowUp":l=r-1>=0?r-1:u.length-1;e=i[l];e&&e.focus();n.preventDefault()}}var v,y,p,w,r=20,b,l,u,t,i,e=!1,k=0,d=0,a=!1,o=!1,g="cplt_frame_1",f=null;n.Overlay={init:et,show:ot}}(CopilotSearch||(CopilotSearch={})),function(n){function c(){return i}function h(t){var f=_d.body,e;if(f&&t&&t!==i){i&&Lib.CssClass.remove(f,u[i]);Lib.CssClass.add(f,u[t]);i=t;switch(t){case n.Helper.CopilotMode.Zero:r&&n.Scopebar.updateScopeLink();o&&(e=_ge("b_copilot_search"),e&&Lib.CssClass.remove(e,"b_zero_mode"));break;case n.Helper.CopilotMode.Float:n.Composer.onUpdate(n.Helper.CopilotSearchState.FloatCompose);break;case n.Helper.CopilotMode.FloatZero:n.Composer.onUpdate(n.Helper.CopilotSearchState.FloatingZeroPage)}}}function l(t){var r,i;h(t);r=e&&!f;r||(i=_qs(".composer_container"),i&&Lib.CssClass.remove(i,n.Helper.hiddenClassName))}function a(t){var i,u,h,c,a,v,y;r=t.enableScopeLinkUpdate;e=t.enableNewLayout;o=t.enableZeroPageLoadFix;s=t.enableAutoFocusOnComposer;n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart);u=n.Base;u&&u.init(t);f=t.mobileUI;h=n.Helper.CopilotMode.Zero;t.showZeroInputPage||(h=n.Helper.CopilotMode.Turn);n.turnContainerElementName=t.enableAjaxRequestFlow?"iso-comp":"iframe";n.Helper.initConfig(t);n.ErrorState.init(t);n.Composer.initComposer(t);n.SuggestionChips.init(t);c=n.Bridge;c&&c.init(t);n.ZeroPage.init(t);l(h);n.TWrap.init(t);n.Conversation.initConversation(t);n.TopMenu.init(t);n.FeedbackData.init(t);n.History.init(t);a=n.Overlay;a&&a.init(t.locStrings,t.ovlMaxCnt,t.enableOverlaySnippet);r&&n.Scopebar.init(t);t.enableAttachment&&t.attachmentConfig&&(n.ImageAttachmentConfig.init(t.attachmentConfig),n.AttachmentManager.init(t.attachmentManagerConfig));n.Threads&&n.Threads.init(t);s&&((i=n.Composer)===null||i===void 0?void 0:i.focus());v=function(){var i=n.SecondBundle;i&&i.init(t);sj_evt.unbind("ShellSecondBundleLoaded",v)};sj_evt.bind("ShellSecondBundleLoaded",v);y=n.DebugBundle;y&&y.init(t)}var t,u=(t={},t[n.Helper.CopilotMode.Turn]="b_turn_mode",t[n.Helper.CopilotMode.Zero]="b_zero_mode",t[n.Helper.CopilotMode.Rest]="b_rest_mode",t[n.Helper.CopilotMode.Float]="b_float_mode",t[n.Helper.CopilotMode.FloatZero]="b_floatzero_mode",t);n.turnContainerElementName="iframe";var f=!1,i,r=!1,e=!1,o=!1,s=!1;n.getMode=c;n.changeMode=h;n.init=a}(CopilotSearch||(CopilotSearch={})),function(n){function c(c,l,a){a===void 0&&(a="");t=_qs("#b_copilot_search .b_copilot_menu_more");i=_qs(u);f=c;e=l;o=a;sj_be(t,"click",v(function(){t.setAttribute("aria-expanded",i.classList.contains("hidden")?"true":"false");i.classList.toggle("hidden");n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.MenuToggle);sj_evt.fire(h)},100));sj_be(t,"click",function(n){n.stopPropagation()});sj_be(_d.body,"click",function(){sj_evt.fire(r)});sj_evt.bind(r,s);y();n.ComposerFileUploadMenu&&n.ComposerFileUploadMenu.initializeImageUpload()}function l(){Lib.CssClass.add(t,n.Helper.hiddenClassName)}function a(){Lib.CssClass.remove(t,n.Helper.hiddenClassName)}function v(n,t){var i;return function(){sb_ct(i);i=sb_st(n,t)}}function s(){_d.querySelectorAll(u).forEach(function(t){Lib.CssClass.add(t,n.Helper.hiddenClassName)})}function y(){var i=_qs(".b_copilot_menu_new_search"),r=function(){if(f){p();return}var t=n.Helper.getLastTurnId(),i=n.Helper.getConversationId(),r=n.Helper.getResponseId();n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.NewSearchClicked,"CSearch",{ConversationId:i,TurnIndex:t,ResponseId:r},"");n.AttachmentManager&&n.AttachmentManager.clearAttachmentsData();n.changeMode&&n.changeMode(n.Helper.CopilotMode.Zero);n.ZeroPage&&n.ZeroPage.show()};sj_be(i,"click",function(){r()});sj_be(i,"keydown",function(n){(n.key==="Enter"||n.key===" ")&&r();(n.key==="Escape"||n.key==="Tab")&&(s(),t.setAttribute("aria-expanded","false"),t.focus())})}function p(){var n=window.location.origin+"/copilotsearch?q=&FORM="+o;e?window.open(n,"_blank"):window.location.href=n}var r="cpltsrch_outClickCloseMenu",h="cpltsrch_outClickCloseModelSwitching",u="#b_copilot_search .b_copilot_menu_cont",t,i,f=!1,e=!1,o="",w={init:c,hideMenu:l,showMenu:a};n.ComposerMenu=w}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function r(n){var r,t,i,u,e;if(n===void 0&&(n=""),t=_d.querySelectorAll(".b_scopebar li[data-menuurl] a"),t===null||t===void 0?void 0:t.length)for(i=0;i<t.length;i++)u=t[i],e=((r=u.getAttribute("href"))===null||r===void 0?void 0:r.replace(f,"q=".concat(encodeURIComponent(n))))||"",e&&u.setAttribute("href",e)}function u(){i?sj_evt.fire("csScopeClk"):n.getMode()!==n.Helper.CopilotMode.Zero&&(n.changeMode(n.Helper.CopilotMode.Zero),n.ZeroPage.show())}function e(n){if(!((n===null||n===void 0?void 0:n.length)<2)){var t=n[1];r(t)}}function o(n){i=n.mobileUI;var t=_qs(".b_scopebar #b-scopeListItem-copilotsearch");t&&(t.setAttribute("role","link"),t.setAttribute("aria-selected","true"),t.setAttribute("aria-current","page"),t.addEventListener("click",u),t.addEventListener("keydown",function(n){n.keyCode===13&&u()}));sj_evt.bind("cpltsrch_qry",e,!0)}function s(n){n.interceptScopeClicks&&sj_evt.bind("bopCompLoaded",h,!0)}function h(){var n=_ge("b-scopeListItem-copilotsearch");n&&(n.setAttribute("inlinechat","true"),sj_be(n,"click",c))}function c(t){var f,e,r,u,o;return(i&&_ge("progContPlaceHolder")&&(_w.sj_disableProgRender=!0),r=_d.querySelectorAll(".ca_userquery"),(r===null||r===void 0?void 0:r.length)>0)?(r[r.length-1].scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),sj_sp(t),sj_pd(t),n.Composer.focus(),!1):(u=l(_w.location.href),!u)?!0:(o=(e=(f=u.searchParams.get("q"))!==null&&f!==void 0?f:u.searchParams.get("Q"))!==null&&e!==void 0?e:"",!o)?!0:(sj_sp(t),sj_pd(t),a(o),!1)}function l(n,t){try{return new URL(n,t)}catch(i){return null}}function a(t){n.Helper.getLastTurnId()==null&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",n.Helper.getConversationId()),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.ConversationStart));n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart);n.Helper.writeLog(n.Helper.ClientInst.Click,n.Helper.LogNames.QueryIssued,"inputType",n.Helper.InputTypes.Scope,"query",t);n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.ScopeClick,"CSearch",{},"");n.Conversation.generateCopilotResponse(t,n.Helper.InputTypes.Scope)}var i=!1,f=new RegExp(/q=[^&]*/);t.updateScopeLink=r;t.init=o;t.initInlineChat=s})(t=n.Scopebar||(n.Scopebar={}))}(CopilotSearch||(CopilotSearch={})),function(n){function t(n){var t;(t=_w.parent)===null||t===void 0?void 0:t.postMessage(n,"*")}function i(n){sj_be(_w,"message",function(t){n(t.data)})}function r(n,t){var i,e='li[turnid="'.concat(n,'"].ca_turn'),f=_d.querySelector(e),r,u;return f?(r=f.querySelector(".frame_cont"),!r)?!1:(u=r.querySelector("iframe"),!u)?!1:((i=u.contentWindow)===null||i===void 0?void 0:i.postMessage(t,"*"),!0):!1}n.postMessage=t;n.bindMessageEvent=i;n.postMessageToIframe=r}(CopilotSearchMessagerIframe||(CopilotSearchMessagerIframe={})),function(n){function t(n){typeof CopilotSearchMessagerAjax!="undefined"&&CopilotSearchMessagerAjax.postMessage?CopilotSearchMessagerAjax.postMessage(n):typeof CopilotSearchMessagerIframe!="undefined"&&CopilotSearchMessagerIframe.postMessage&&CopilotSearchMessagerIframe.postMessage(n)}function i(n){typeof CopilotSearchMessagerAjax!="undefined"&&CopilotSearchMessagerAjax.bindMessageEvent?CopilotSearchMessagerAjax.bindMessageEvent(n):typeof CopilotSearchMessagerIframe!="undefined"&&CopilotSearchMessagerIframe.bindMessageEvent&&CopilotSearchMessagerIframe.bindMessageEvent(n)}function r(n,t,i){var r=!1;typeof CopilotSearchMessagerAjax!="undefined"&&CopilotSearchMessagerAjax.postMessageToTurn?(CopilotSearchMessagerAjax.postMessageToTurn(i),r=!0):typeof CopilotSearchMessagerIframe!="undefined"&&CopilotSearchMessagerIframe.postMessageToIframe&&(r=CopilotSearchMessagerIframe.postMessageToIframe(n,i),console.debug("IsMessagePostedToIframe: "+r));CopilotSearch.Helper.writeLog(CopilotSearch.Helper.ClientInst.CopilotSystem,CopilotSearch.Helper.LogNames.PostMessageToTurn,"responseId",t,"isMessageFired",r.toString())}function u(n,i){t({type:"MagFollowup",data:{query:n,iframeid:i}})}n.CopilotSearchMessageEvent="csisomsg";n.postMessage=t;n.bindMessageEvent=i;n.postMessageToTurn=r;n.issueMagazineFollowup=u}(CopilotSearchMessager||(CopilotSearchMessager={})),function(n){var t;(function(t){function i(){return document.querySelectorAll(".ca_turn").length}function r(t,i,r,u){r===void 0&&(r=null);u===void 0&&(u="");console.log("AS clicked: ".concat(r));i==null&&(i=n.Helper.InputTypes.AutoSuggest);n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart);n.getMode()!==n.Helper.CopilotMode.Turn&&(n.changeMode(n.Helper.CopilotMode.Turn),n.ZeroPage.hide());n.Helper.writeLog(n.Helper.ClientInst.Click,n.Helper.LogNames.QueryIssued,"inputType",n.Helper.InputTypes.AutoSuggest,"query",t,"displayedQuery",r);n.Conversation.generateCopilotResponse(t,i);n.Composer.resetComposer()}function u(){n.Composer.resize()}function f(){return n.SuggestionChips.getSuggestionChipId()}function e(){return n.SuggestionChips.getSuggestionChips()}function o(){return n.Conversation.fullFormedQuery}function s(){return n.Conversation.conversationId}function h(){var n=document.querySelector(".suggestion_container");n===null||n===void 0?void 0:n.classList.add("hidden")}function c(){var n=document.querySelector(".suggestion_container");n===null||n===void 0?void 0:n.classList.remove("hidden")}function l(){return n.Conversation.getFrameIG()}t.getTurnCount=i;t.handleAutoSuggestClick=r;t.handleResize=u;t.getSuggestionChipId=f;t.getSuggestionChips=e;t.getFullFormedquery=o;t.getConversationId=s;t.hideSuggestionChips=h;t.showSuggestionChips=c;t.getFrameIG=l})(t=n.AutoSuggest||(n.AutoSuggest={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){var i;(function(t){function i(t,i){if(i){var r=t;return n.Composer.enterSearch(r)}return n.Composer.onComposerSubmit(t)}t.handleBOPASSubmit=i})(i=t.AS||(t.AS={}))})(t=n.Composer||(n.Composer={}))}(CopilotSearch||(CopilotSearch={})),function(n){var t;(function(t){function r(t){var l,r,u,f,e,o,s,h,a,v,c;t.enableSERPChat&&(l=i(n.PerformanceHelper,"CopilotSearch.PerformanceHelper"),l&&t.fromSerpComposer&&l.setIsInlineChat(),r=i(n.Helper,"CopilotSearch.Helper"),r===null||r===void 0?void 0:r.initConfig(t),u=i(n.ErrorState,"CopilotSearch.ErrorState"),u===null||u===void 0?void 0:u.init(t),f=i(n.SuggestionChips,"CopilotSearch.SuggestionChips"),f===null||f===void 0?void 0:f.init(t),e=i(n.TWrap,"CopilotSearch.TWrap"),e===null||e===void 0?void 0:e.init(t),o=i(n.Conversation,"CopilotSearch.Conversation"),o===null||o===void 0?void 0:o.initConversation(t),s=i(n.TopMenu,"CopilotSearch.TopMenu"),s===null||s===void 0?void 0:s.init(t),h=i(n.FeedbackData,"CopilotSearch.FeedbackData"),h===null||h===void 0?void 0:h.init(t),a=i(n.History,"CopilotSearch.History"),a&&t.enableHistoryUpdate&&a.init(t),v=i(n.Scopebar,"CopilotSearch.Scopebar"),v&&v.initInlineChat(t),c=i(n.Overlay,"CopilotSearch.Overlay"),c===null||c===void 0?void 0:c.init(t.locStrings,t.ovlMaxCnt,t.enableOverlaySnippet))}function i(n,t){return typeof n=="undefined"?(_w.Log&&Log.Log("ReferenceJSError","SERPBOPCopilotSearchComposorContainer","",!0,"Message","".concat(t," not loaded.")),undefined):n}t.init=r;sj_evt.fire("bopChatReady")})(t=n.SERP||(n.SERP={}))}(CopilotSearch||(CopilotSearch={}))