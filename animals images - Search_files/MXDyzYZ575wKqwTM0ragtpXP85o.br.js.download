"use strict";var ACF;(function(n){var t;(function(t){var i;(function(t){class i extends n.Common.AcfBase.AcfBaseElement{constructor(){super([]);this.itemHeaderSelector=".acf-accn-itm__hdr";this.accordionItems=[];this.accordionListContainer=null;this.loaderElement=null;this.accordionLoaderRowTemplate=null}static isInstance(t){return n.Common.Utils.ElementUtils.doTagsMatch(t,i.tagName)}init(){if(this.eventListenerAbortController===null)return Promise.reject();if(this.accordionListContainer=this.querySelector(".acf-accn__list"),this.accordionListContainer===null||!(this.accordionListContainer instanceof HTMLElement))throw new n.Common.Utils.ErrorUtils.AcfError(this.tagName,"Did not find list element.");if(this.accordionItems=this.getHeaderItems(),this.accordionItems.length===0)throw new n.Common.Utils.ErrorUtils.AcfError(this.tagName,"Did not find accordion items.");if(this.isDynamicExpansionEnabled){if(this.loaderElement=this.querySelector(".acf-accn__ldr-wrapper"),this.loaderElement===null||!(this.loaderElement instanceof HTMLElement))throw new n.Common.Utils.ErrorUtils.AcfError(this.tagName,"Did not find loader element while dynamic expansion is enabled.");if(this.accordionLoaderRowTemplate=this.querySelector(".acf-accn__ldr-row-template"),this.accordionLoaderRowTemplate===null||!(this.accordionLoaderRowTemplate instanceof HTMLTemplateElement))throw new n.Common.Utils.ErrorUtils.AcfError(this.tagName,"Did not find loader row template while dynamic expansion is enabled.");}this.addEventListener("click",n=>this.handleAccordionClick(n),{signal:this.eventListenerAbortController.signal});this.addEventListener("keydown",n=>this.handleAccordionKeyDown(n),{signal:this.eventListenerAbortController.signal});let t=!1;for(const n of this.accordionItems)if(n.ariaExpanded==="true"){const i=t===!1||!this.singleExpand;this.setItemExpansion(n,i);t=!0}return Promise.resolve()}dispose(){}get singleExpand(){return this.getAttribute("data-expand-mode")==="Single"}get isDynamicExpansionEnabled(){return this.hasAttribute("data-dyn-expn")}collapseAllItems(){for(const n of this.accordionItems)this.setItemExpansion(n,!1)}expandItemAtIndex(n){const t=this.accordionItems[n];t!==null&&t!==undefined&&this.setItemExpansion(t,!0)}loadItemContent(n,t){const i=this.accordionItems[n];if(i!==null&&i!==undefined){const r=i.closest(".acf-accn-itm");if(r!==null&&r instanceof HTMLElement){const u=r.querySelector(".acf-accn-itm__panel");u!==null&&u instanceof HTMLElement&&(u.replaceChildren(t.cloneNode(!0)),i.ariaExpanded==="true"&&this.expandItemAtIndex(n))}}}isValidAccordionItem(n){if(!(n instanceof HTMLLIElement)||!(n.className==="acf-accn-itm"))return!1;const t=n.querySelectorAll(":scope > h3 > button.acf-accn-itm__hdr");if(t.length!==1)return!1;const i=n.querySelectorAll(":scope > section.acf-accn-itm__panel");return i.length!==1?!1:!0}addItems(t){if(this.isDynamicExpansionEnabled&&this.accordionListContainer!==null&&this.accordionListContainer!==undefined){const u=t.filter(n=>this.isValidAccordionItem(n));if(u.length!==0){u.forEach(n=>{var t;if((t=this.accordionListContainer)!==null&&t!==void 0)return t.appendChild(n)});const e=this.accordionItems.length;this.accordionItems=this.getHeaderItems();const o=this.accordionItems.length,r=o-e,s=Array.from({length:r},(n,t)=>e+t);n.Common.Utils.LoggingUtils.log({eventType:"Show",controlTagName:i.tagName,eventDescription:"ItemsAdded",loggingValues:this.loggingValues,data:{addedCount:r.toString(),totalCount:this.accordionItems.length.toString()}});this.dispatchEvent(new f({addedIndices:s,addedCount:r,totalCount:this.accordionItems.length}))}}}showLoader(n){var t,i;if(this.isDynamicExpansionEnabled&&!(n<=0)&&this.loaderElement!==null&&this.loaderElement!=undefined&&this.accordionLoaderRowTemplate!==null&&this.accordionLoaderRowTemplate!=undefined){const r=this.loaderElement.querySelectorAll(".acf-accn__ldr-row");r.forEach(n=>n.remove());for(let r=0;r<n;r++){const n=(i=(t=this.accordionLoaderRowTemplate.content)===null||t===void 0?void 0:t.firstElementChild)===null||i===void 0?void 0:i.cloneNode(!0);n instanceof HTMLElement&&this.loaderElement.appendChild(n)}this.loaderElement.hidden=!1}}hideLoader(){this.isDynamicExpansionEnabled&&this.loaderElement!==null&&this.loaderElement!==undefined&&(this.loaderElement.hidden=!0)}setItemExpansion(n,t){const r=n.closest(".acf-accn-itm");if(r!==null&&r instanceof HTMLElement){const i=r.querySelector(".acf-accn-itm__panel");i!==null&&i instanceof HTMLElement&&(t&&this.singleExpand&&this.collapseAllItems(),i.ariaHidden=t?"false":"true",i.style.maxHeight=t?`${i.scrollHeight}px`:"0px",n.ariaExpanded=t?"true":"false")}}handleAccordionClick(t){if(t.target!==null&&t.target!==undefined&&t.target instanceof HTMLElement){const r=t.target.closest(this.itemHeaderSelector);if(r!==null&&r instanceof HTMLButtonElement){const f=this.accordionItems.indexOf(r);if(f!==-1){const e=r.ariaExpanded==="false";this.setItemExpansion(r,e);n.Common.Utils.LoggingUtils.log({eventType:"Click",controlTagName:i.tagName,eventDescription:"Click",loggingValues:this.loggingValues,data:{index:f.toString()}});this.dispatchEvent(new u({itemIndex:f}))}}}}handleAccordionKeyDown(t){if(!(this.accordionItems.length<=1)&&t.target!==null&&t.target!==undefined&&t.target instanceof HTMLElement){const u=this.accordionItems.indexOf(t.target);if(u!==-1)if(t.key==="ArrowUp"){t.preventDefault();const f=u===0?this.accordionItems.length-1:u-1;this.focusAccordionItem(f);n.Common.Utils.LoggingUtils.log({eventType:"KeyPress",controlTagName:i.tagName,eventDescription:"ArrowUp",loggingValues:this.loggingValues,data:{}});this.dispatchEvent(new r({eventKey:t.key}))}else if(t.key==="ArrowDown"){t.preventDefault();const f=u===this.accordionItems.length-1?0:u+1;this.focusAccordionItem(f);n.Common.Utils.LoggingUtils.log({eventType:"KeyPress",controlTagName:i.tagName,eventDescription:"ArrowDown",loggingValues:this.loggingValues,data:{}});this.dispatchEvent(new r({eventKey:t.key}))}else t.key==="Home"?(t.preventDefault(),this.focusAccordionItem(0),n.Common.Utils.LoggingUtils.log({eventType:"KeyPress",controlTagName:i.tagName,eventDescription:"Home",loggingValues:this.loggingValues,data:{}}),this.dispatchEvent(new r({eventKey:t.key}))):t.key==="End"&&(t.preventDefault(),this.focusAccordionItem(this.accordionItems.length-1),n.Common.Utils.LoggingUtils.log({eventType:"KeyPress",controlTagName:i.tagName,eventDescription:"End",loggingValues:this.loggingValues,data:{}}),this.dispatchEvent(new r({eventKey:t.key})))}}focusAccordionItem(n){if(!(n<0)&&!(n>=this.accordionItems.length)){const t=this.accordionItems[n];t!==null&&t!==undefined&&t.focus()}}getHeaderItems(){return Array.from(this.querySelectorAll(this.itemHeaderSelector))}}i.tagName="acf-accordion";t.ACFAccordionElement=i;class u extends Event{constructor(n){super(u.eventName,{bubbles:!0});this.itemIndex=n.itemIndex}}u.eventName=`${i.tagName}:click`;t.ACFAccordionClickEvent=u;class r extends Event{constructor(n){super(r.eventName,{bubbles:!0});this.eventKey=n.eventKey}}r.eventName=`${i.tagName}:keydown`;t.ACFAccordionKeyDownEvent=r;class f extends Event{constructor(n){super(f.eventName,{bubbles:!0});this.addedIndices=[...n.addedIndices];this.addedCount=n.addedCount;this.totalCount=n.totalCount}}f.eventName=`${i.tagName}:items-added`;t.ACFAccordionItemsAddedEvent=f;n.Common.Utils.ElementUtils.defineComponent(i.tagName,i)})(i=t.ACFAccordion||(t.ACFAccordion={}))})(t=n.Components||(n.Components={}))})(ACF||(ACF={}))