var SERPCopilotSearchComposer;(function(n){function br(){var i,u,n,r;if(!ui){if(i=_w.pageYOffset,u=i<pt,pt=i,n=Lib.CssClass.contains(t,e),r=dr(),h=r,!gi&&u){n&&rt(!0);return}if(r){b&&(nr?n&&rt(!0):gu());return}nf();(i>o!=n||k==100&&h)&&(n?rt(!1):fi())}}function gu(){Lib.CssClass.add(t,lt);w&&!l&&Lib.CssClass.add(t,ai)}function nf(){Lib.CssClass.remove(t,lt);w&&!l&&Lib.CssClass.remove(t,ai)}function fi(){ni||(si(bu),ni=!0);l||nu();Lib.CssClass.add(_d.body,ci);Lib.CssClass.add(t,e);ei(p);vf()}function rt(n){Lib.CssClass.contains(t,e)&&(n?kr():Lib.CssClass.add(t,hi))}function kr(){Lib.CssClass.remove(t,hi);Lib.CssClass.remove(t,e);Lib.CssClass.remove(_d.body,ci);ei(0)}function dr(){return _w.pageYOffset+_w.innerHeight>=sb_de.offsetHeight-1}function tf(){if(r&&"ResizeObserver"in window){var n=new ResizeObserver(function(n){for(var o,r,u,i=0,f=n;i<f.length;i++)o=f[i],r=o.contentRect.height,ut!==r&&(u=r-ut,p=p+u,ut=r,Lib.CssClass.contains(t,e)&&(ei(p),h&&u>0&&window.scrollTo(_w.pageXOffset,_w.pageYOffset+u)))});n.observe(u);pr&&sj_evt.bind("csInlineSearchTrig",function(){n.disconnect()})}}function rf(){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var n=new IntersectionObserver(function(n,t){n.forEach(function(n){n.isIntersecting&&(dt||(si(wu),dt=!0,(CopilotSearch===null||CopilotSearch===void 0?void 0:CopilotSearch.Helper)&&CopilotSearch.Helper.logCustomData&&CopilotSearch.Helper.logCustomData(CopilotSearch.Helper.ClientInst.SystemEvent,du,"Serp",{},""),hf()),t.disconnect())})},{root:null,threshold:.1});n.observe(t)}}function uf(){r=_ge("b_copilot_search");l=Lib.CssClass.contains(r,yu);l&&(sj_evt.bind(pi,iu),sj_evt.bind(wi,ru),or&&sj_evt.bind(bi,uu),wt||gr(!1));cr&&sj_evt.bind("ShellTurnScroll",eu,!0);Lib.CssClass.remove(r,y);p=r.offsetHeight;ti||ff();u=_qs(".composer_container");f=_ge("b_copilot_composer_2");ut=u.offsetHeight;ti||tf();l&&!wt&&(cf(),gr(!0));sr&&f&&(sj_be(f,"mouseenter",ot),sj_be(f,"focus",ot))}function ot(){f&&((sj_ue(f,"mouseenter",ot),sj_ue(f,"focus",ot),gt||(si(ku),gt=!0),hr)||setTimeout(function(){f&&(f.focus(),fu())},0))}function ff(){(s=_ge(yi),s)||(s=sj_ce("div",yi),w&&Lib.CssClass.add(s,lt),r.after(s))}function ei(n){if(s){var t=w?ef(n):n;s.style.height=t+"px"}}function ef(n){var t=n,i,r;return vt&&(t-=vt.offsetHeight),yt&&(i=getComputedStyle(yt),t-=parseInt(i.paddingBottom)),u&&(r=getComputedStyle(u),t-=parseInt(r.marginTop)),Math.max(0,t)}function sf(){if(i=_qs("#b_bop_cs_sb_place .suggestion_wrapper"),i&&i.childElementCount!=0){Lib.CssClass.add(t,"b_hassc");Lib.CssClass.remove(i,"hidden");(CopilotSearch===null||CopilotSearch===void 0?void 0:CopilotSearch.Helper)&&CopilotSearch.Helper.logCustomData&&CopilotSearch.Helper.logCustomData(CopilotSearch.Helper.ClientInst.SystemEvent,CopilotSearch.Helper.LogNames.SuggestionChipEvent,"Serp",{Source:"BOPComposer"},"");var n=i.querySelectorAll(".suggestion_chip");n===null||n===void 0?void 0:n.forEach(function(n,t){return sj_be(n,"click",function(){var i,r;(CopilotSearch===null||CopilotSearch===void 0?void 0:CopilotSearch.Helper)&&CopilotSearch.Helper.logCustomData&&CopilotSearch.Helper.logCustomData(CopilotSearch.Helper.ClientInst.CopilotInteraction,CopilotSearch.Helper.LogNames.SuggestionChipClick,"Serp",{Position:(i=t+1)===null||i===void 0?void 0:i.toString(),Title:(r=n===null||n===void 0?void 0:n.innerText)!==null&&r!==void 0?r:"",Source:"BOPComposer"},"")})})}}function hf(){var n,t;i&&(n=i.querySelectorAll(".suggestion_chip"),n&&n.length!=0)&&(t=[],n===null||n===void 0?void 0:n.forEach(function(n){(n===null||n===void 0?void 0:n.innerText)&&t.push(n.innerText)}),(CopilotSearch===null||CopilotSearch===void 0?void 0:CopilotSearch.Helper)&&CopilotSearch.Helper.logCustomData&&CopilotSearch.Helper.logCustomData(CopilotSearch.Helper.ClientInst.SystemEvent,CopilotSearch.Helper.LogNames.SuggestionChipRender,"Serp",{NumChips:n.length.toString(),Titles:JSON.stringify(t),Source:"BOPComposer"},""))}function gr(n){i&&(n?Lib.CssClass.remove(i,y):Lib.CssClass.add(i,y))}function cf(){var s,f,n,o,e,v;if(i&&r&&(s=_qs("#b_copilot_search .composer_wrapper"),s)&&(f=i.querySelectorAll(".suggestion_chip"),f.length!==0)){n=getComputedStyle(f[0]);lf(n);var p=parseInt(n.paddingLeft)+parseInt(n.paddingRight)+parseInt(n.borderLeftWidth)+parseInt(n.borderRightWidth),h=getComputedStyle(i),w=parseInt(_G.RTL?h.marginRight:h.marginLeft),b=parseInt(h.gap)||0,k=_d.documentElement.clientWidth||_w.innerWidth,l=getComputedStyle(t),d=parseInt(_G.RTL?l.paddingRight:l.paddingLeft),g=Math.min(u.offsetWidth,k-d),c=g-s.offsetWidth-w;for(o=0;o<f.length;o++)e=f[o],v=(a?Math.ceil(a.measureText(e.innerText).width):e.hasAttribute("data-width")?parseInt(e.getAttribute("data-width")):0)+p,c-=v,c<0&&Lib.CssClass.add(e,y),c-=b}}function lf(n){var t,i;a||(t=_d.createElement("canvas"),t.getContext&&(a=t.getContext("2d")),a)&&(i=n.fontWeight+" "+n.fontSize+" "+n.fontFamily,a.font=i)}function af(){i&&Lib.CssClass.remove(i,li)}function nu(){i&&Lib.CssClass.add(i,li)}function tu(n){n.animationName==="fadeInAnimation"&&n.target===t&&af();i&&n.animationName==="scFadeOutAnimation"&&n.target===i&&nu();n.animationName==="fadeOutAnimation"&&n.target===t&&kr()}function iu(){Lib.CssClass.add(u,vi)}function ru(){Lib.CssClass.remove(u,vi)}function uu(){o=ki;fu()}function fu(){Lib.CssClass.add(u,"chatmode");sj_evt.unbind(pi,iu);sj_evt.unbind(wi,ru);sj_evt.unbind(bi,uu)}function eu(){var t=_ge("b_content"),n=_d.querySelectorAll(".ca_userquery"),i=_d.querySelector(".b_inlineChatInitWrapper .ca_div");(n===null||n===void 0?void 0:n.length)<=0||!t||(i&&(i.style.display="block"),Lib.CssClass.remove(t,"b_showconv"),n[0].scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),sj_evt.fire("bcontentvis"),sj_evt.unbind("ShellTurnScroll",eu))}function ou(n){var t=bt?-1:n*_d.body.offsetHeight/100;return ur&&(t=Math.max(o,bf())),t}function vf(){if(vr&&(!lr||!ar)){var n=t.querySelector(".b_copilot_composer");if(n){if(yr){if(wr)return;wr=!0;ct();et=window.setTimeout(function(){st(n,!1)},ri);d&&pf(n);return}st(n,!1)}}}function st(n,t){var r=t?n.getAttribute("placeholder")||"":"",i=t?r.length:0;ct();g=window.setInterval(function(){i<=v.length?(n.setAttribute("placeholder",v.substring(0,i)),i++):(ht(),t&&nt&&(tt="erasing",it=window.setTimeout(function(){yf(n)},ri)))},ii)}function yf(n){var t=v.length;ht();g=window.setInterval(function(){t>=0?(n.setAttribute("placeholder",v.substring(0,t)),t--):(ht(),tt="typing",it=window.setTimeout(function(){st(n,!0)},ri))},ii)}function pf(n){n.addEventListener("mouseenter",function(){d&&(nt=!0,tt="typing",st(n,!0))});n.addEventListener("mouseleave",function(){d&&wf(n)});n.addEventListener("focus",function(){d&&(nt=!1)})}function wf(n){nt=!1;n.getAttribute("placeholder")===v&&ct();tt="typing"}function ht(){g!==null&&(clearInterval(g),g=null)}function ct(){ht();et!==null&&(clearTimeout(et),et=null);it!==null&&(clearTimeout(it),it=null)}function oi(){var i=ft?_w.screen.width:_w.innerWidth,r=ft?_w.screen.height:_w.innerHeight,n;!kt&&(tr||ft)&&(Math.round(i)<ir||Math.round(r)<rr)||(t=_ge("b_bop_cs_sb_place"),t)&&"ResizeObserver"in window&&((at=_ge("b_header"),vt=_ge("b_footer"),yt=_ge("b_content"),o=ou(k),ki=ou(30),n=at?Math.max(at.offsetHeight,o):o,!kt&&_d.body.offsetHeight-n<_w.innerHeight+100&&!bt&&k!=100)||(fr?df():su()))}function su(){sf();uf();rf();sj_be(t,"animationend",tu);sj_evt.fire("bopCompLoaded");_ge("progContPlaceHolder")&&(b=!1,sj_evt.bind("directNavComplete",cu,!0));h=dr();var n=_w.pageYOffset>o||k==100&&h;b&&(n=n&&!h);(n||er)&&fi();sj_be(_d,"scroll",br);sj_evt.bind("ajax.unload",hu,!1);sj_evt.bind("multiturn.pin",lu,!1);sj_evt.bind("multiturn.unpin",au,!1)}function bf(){var n=_d.querySelector(".copans_container"),t=n&&n.querySelector(".copans_sc_main"),i=t&&t.querySelector(".copans_sc");return n&&t&&i?n.getBoundingClientRect().bottom:0}function hu(){sj_ue(_d,"scroll",br);t&&sj_ue(t,"animationend",tu);sj_evt.unbind("onP1",oi);sj_evt.unbind("ajax.unload",hu);sj_evt.unbind("directNavComplete",cu);sj_evt.unbind("multiturn.pin",lu);sj_evt.unbind("multiturn.unpin",au);rt(!0);r&&Lib.CssClass.add(r,"b_hide")}function cu(){b=!0}function lu(){ui=!0;c!==null&&clearTimeout(c);c=window.setTimeout(function(){Lib.CssClass.contains(t,e)||fi();c=null},2e3)}function au(){c!==null&&(clearTimeout(c),c=null);ui=!1;Lib.CssClass.contains(t,e)&&rt(!0)}function kf(){sj_evt.bind("onP1",oi,!0)}function df(){var n=_ge("bopchat-css-link");n&&(n.rel!=="stylesheet"?(n.rel="stylesheet",n.onload=function(){vu()}):vu())}function vu(){var n=_ge("b_copilot_search_container");Lib.CssClass.remove(n,y);su()}function si(n){typeof Log!="undefined"&&Log.LogFilterFlare&&Log.LogFilterFlare([pu+n])}function gf(n){var t,i,r,u,f,e,o,s,c,l,a,y,p,g,it,rt,ut,et,ot,st,ht,lt,at,vt,yt,ri,ui,fi,ei;di=(t=n.enableInitOnLoad)!==null&&t!==void 0?t:!1;gi=(i=n.enablePinWhenScrollUp)!==null&&i!==void 0?i:!1;nr=(r=n.enableFadeInWhenScrollUp)!==null&&r!==void 0?r:!1;w=(u=n.enablePinAboveFooter)!==null&&u!==void 0?u:!1;tr=(f=n.hideBaseWOrH)!==null&&f!==void 0?f:!1;ft=(e=n.hideBaseRes)!==null&&e!==void 0?e:!1;ir=(o=n.showMinWidth)!==null&&o!==void 0?o:0;rr=(s=n.showMinHeight)!==null&&s!==void 0?s:0;wt=(c=n.mobileUI)!==null&&c!==void 0?c:!1;ur=(l=n.duplicateSC)!==null&&l!==void 0?l:!1;bt=(a=n.alwaysPinComposer||n.isTechHelpMagazineRequest)!==null&&a!==void 0?a:!1;fr=(y=n.enablePrefetchCss)!==null&&y!==void 0?y:!1;kt=(p=n.alwaysShowComposer)!==null&&p!==void 0?p:!1;er=(g=n.isTechHelpMagazineRequest)!==null&&g!==void 0?g:!1;or=(it=n.enableEngagedSerpComposer)!==null&&it!==void 0?it:!1;ti=(rt=n.enableShowInlineChat)!==null&&rt!==void 0?rt:!1;cr=(ut=n.enableShowSerpOnInlineChat)!==null&&ut!==void 0?ut:!1;k=(et=n.showThresholdPercent)!==null&&et!==void 0?et:30;lr=(ot=n.isSERPVertical)!==null&&ot!==void 0?ot:!1;ar=(st=n.goToSERP)!==null&&st!==void 0?st:!1;vr=(ht=n.enableAnimatedComposerHint)!==null&&ht!==void 0?ht:!1;yr=(lt=n.enableAnimatedHintPlayOnce)!==null&&lt!==void 0?lt:!1;d=(at=n.enableAnimatedHintOnHover)!==null&&at!==void 0?at:!1;ii=(vt=n.animationIntervalMs)!==null&&vt!==void 0?vt:100;v=(ri=(yt=n.locStrings)===null||yt===void 0?void 0:yt.copilotSearchBoxFollowUp)!==null&&ri!==void 0?ri:"Ask me anything...";sr=(ui=n.focusBopOnHover)!==null&&ui!==void 0?ui:!1;hr=(fi=n.focusBopOnHoverFFOnly)!==null&&fi!==void 0?fi:!1;pr=(ei=n.enableSerpChat)!==null&&ei!==void 0?ei:!1;b=!0;dt=!1;gt=!1;ni=!1;h=!1;pt=0;ct();nt=!1;tt="typing";di?oi():kf()}var e="b_pinbop",lt="b_bop_nobg",hi="b_unpin_anim",ci="b_pincomposer",li="b_bop_sc_hide",ai="b_pin_abovefoot",vi="focusmode",yu="b_collapsed_co",y="b_hide",yi="b_bop_pin_placehold",pu="webco_",wu="visible",bu="overlay",ku="hover",pi="csComposerFocus",wi="csComposerBlur",bi="csComposerTurn",du="csComposerRender",o,ki=0,t,at,vt,yt,r,s,p=0,u,f,i,ut=0,pt=0,h=!1,l=!1,a,di=!1,gi=!1,nr=!1,w=!1,tr=!1,ft=!1,ir=0,rr=0,wt=!1,ur=!1,bt=!1,fr=!1,kt=!1,er=!1,b=!0,dt=!1,gt=!1,ni=!1,or=!1,ti=!1,sr=!1,hr=!1,cr=!1,k=30,lr=!1,ar=!1,vr=!1,yr=!1,d=!1,pr=!1,v="",wr=!1,g=null,et=null,nt=!1,tt="typing",ii=100,ri=500,it=null,ui=!1,c=null;n.initComposer=gf})(SERPCopilotSearchComposer||(SERPCopilotSearchComposer={}))